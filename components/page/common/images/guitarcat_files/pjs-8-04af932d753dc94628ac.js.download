(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[8],{AlW1:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var r=n("GyhR"),o=n.n(r),a=n("Ivf5"),i=n("D+W/"),c=n("Qo1m"),l=n("kIql"),s=n("evwu"),u=n("j/DJ"),d=(n("Irlq"),n("7Iyi")),p=n("9Y9K"),f=n("ovu7");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){S(e,t,n[t])})}return e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){var t,n;return n=t=function(t){function n(){var e,t,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return r=this,o=(e=g(n)).call.apply(e,[this].concat(l)),t=!o||"object"!==m(o)&&"function"!=typeof o?_(r):o,S(_(_(t)),"state",{createBoardError:null,inputName:t.props.prefilledName||"",nameValidators:[Object(f.q)({message:c.a._("Don't forget to name your board!")}),Object(f.k)({max:i.a.MAX_CHARS_FOR_BOARD_TITLE})],nameValidatorErrors:[],privacy:t.props.isAdAccountOwner?i.a.BoardPrivacy.PUBLIC:i.a.BoardPrivacy.PROTECTED,saving:!1}),S(_(_(t)),"handleChangeName",function(e,n){var r=Object(f.t)(t.state.nameValidators,e);t.setState({inputName:e,nameValidatorErrors:r,createBoardError:null},function(){n&&t.handleCreate()})}),S(_(_(t)),"handleChangePrivacy",function(){var e=t.state.privacy===i.a.BoardPrivacy.SECRET?i.a.BoardPrivacy.PUBLIC:i.a.BoardPrivacy.SECRET;t.setState({privacy:e})}),S(_(_(t)),"handleCreate",function(){var e=t.state,n=e.inputName,r=e.privacy,o=t.props,a=o.createBoard,i=o.invalidateResource,l=o.onCreate,s=o.isAdAccountOwner,u=o.advertiser_id,d=b({privacy:r,name:n},!s&&u?{advertiser_id:u}:{});t.setState({saving:!0,createBoardError:null}),a(d).then(function(e){t.setState({saving:!1}),l(e)}).catch(function(e){var n=c.a._("Uh oh! Something went wrong.");if(e.message){var r=e.message,o=e.message_detail;n=o?"".concat(r," ").concat(o):r}else"string"==typeof e&&(n=e);t.setState({saving:!1,createBoardError:n})}),i(r)}),t}var a,l,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(n,r["Component"]),a=n,(l=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.prefilledName&&this.setState({inputName:e.prefilledName})}},{key:"render",value:function(){var t=this.props,n=(t.createBoard,t.invalidateResource,h(t,["createBoard","invalidateResource"]));return o.a.createElement(e,Object.assign({onChangeBoardName:this.handleChangeName,onChangeBoardPrivacy:this.handleChangePrivacy,onBoardCreate:this.handleCreate},n,this.state))}}])&&y(a.prototype,l),s&&y(a,s),n}(),S(t,"displayName","WithBoardCreatePane(".concat(e.displayName||e.name,")")),n}function w(e){var t=e.advertiser,n=e.viewer,r=!t||n.isAuth&&t.owner_user_id===n.id,o=t&&t.id;return b({isAdAccountOwner:r},o?{advertiser_id:o}:{})}function O(e,t){return{invalidateResource:function(n){e(Object(d.f)("BoardsResource",Object(u.a)(t.viewer.username,n===i.a.BoardPrivacy.SECRET)))},createBoard:function(t){return e(Object(s.e)(t))}}}function C(e){return Object(p.compose)(l.a,Object(a.connect)(w,O),E)(e)}},FIpZ:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=(n("rWj7"),n("Qo1m")),i=n("HcVA"),c=n("g4pz"),l=n("+U6O"),s=function(e){var t=e.link,n=e.grayscale,r=e.handleClick,s=e.handleFocus;return o.a.createElement("div",{className:"ShareLink"},o.a.createElement("div",{className:"link"},o.a.createElement("div",{className:"icon"},o.a.createElement(c.a,{size:30,grayscale:n})),o.a.createElement(i.a,{ref:function(e){return e&&e.focus()},className:"Input linkField",value:t,onFocus:s}),o.a.createElement("div",{className:"cancelLink",onClick:r},o.a.createElement(l.n,{accessibilityLabel:a.a._("Close","close copy link"),icon:"cancel",bgColor:"white",color:"gray"}))))};s.defaultProps={grayscale:!1},t.a=s},JXQe:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=n("Qo1m"),i=n("HcVA"),c=(n("hvnN"),n("vBbO")),l=n("SMmS"),s=n("VSY/"),u=n("+U6O");function d(e){var t=e.body,n=e.img,o=e.onClick,i=e.selected,c=e.title,l=e.username,s=e.valid,d=l||t;return r.createElement(u.b,{marginBottom:4},r.createElement(u.P,{onTouch:o},r.createElement(u.b,{display:"flex",alignItems:"center",direction:"row",width:"100%"},n,r.createElement(u.b,{marginLeft:3,flex:"grow",marginRight:2},r.createElement(u.b,{marginBottom:1},r.createElement(u.K,{bold:!0,size:"md",truncate:!0},c)),r.createElement(u.K,{size:"xs",truncate:!0},d)),r.createElement(u.b,{marginLeft:2},function(e,t){if(l)return e?r.createElement(u.n,{icon:"check-circle",color:"red",accessibilityLabel:a.a._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites"),size:32}):r.createElement(u.b,{height:32,width:32,shape:"circle",dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}}});var n={text:a.a._("Sent","Sent a board collaborator invite"),color:"gray",size:"sm",disabled:!0,inline:!0};return e||(n.text=a.a._("Invite","Add board collaborator invite"),n.disabled=Boolean(!t)),r.createElement(u.c,n)}(i,s)))))}var p=n("0Wmr");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t,n){var r=e.id;return t===n.findIndex(function(e){return e.id===r})}var _=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=h(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==f(o)&&"function"!=typeof o?y(r):o,g(y(y(n)),"state",{selectedCollaborators:[],showCollabList:!1,showSocialConnectPanel:!1,typeaheadSuggestions:[],value:""}),g(y(y(n)),"handleTextFieldChange",function(e){n.setState({value:e})}),g(y(y(n)),"handleCollaboratorClick",function(e){var t=e.id,r=e.type;n.isIdSelected[t]=!n.isIdSelected[t];var o=n.state.selectedCollaborators.concat([e]),a="email"===r?p.c:p.d;n.props.onSelectedCollaboratorsChange({id:t,resource:a}),n.setState({selectedCollaborators:o})}),g(y(y(n)),"handleTypeaheadSuggestionsChange",function(e){n.setState({typeaheadSuggestions:e})}),g(y(y(n)),"handleToggleCollabList",function(){n.setState(function(e){return{showCollabList:!e.showCollabList}})}),g(y(y(n)),"isIdSelected",{}),n}var n,l,_;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(l=[{key:"render",value:function(){var e=this,t=this.state,n=t.value,l=t.showCollabList,p=this.props.inCollabInBoardCreateExperiment,f=(""===n?this.props.shareSuggestions:this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:n,valid:Object(s.g)(n)}).concat(this.props.shareSuggestions).filter(v)).map(function(t,n){return function(e,t,n){if("user_share_suggestion"===e.type||"user"===e.type){var o=r.createElement(u.a,{name:e.title||e.full_name,src:e.image_medium_url,size:"md"});return r.createElement(d,{img:o,onClick:function(){return n(e)},selected:t,title:e.full_name,username:e.username})}if("email"===e.type){var i,c,l=e.id,p=e.valid,f=r.createElement(u.b,{shape:"circle",color:"lightGray",height:40,width:40,display:"flex",justifyContent:"center",alignItems:"center"},r.createElement(u.n,{color:"darkGray",icon:"envelope",size:20,accessibilityLabel:a.a._("Email icon","Email icon on board create modal")})),m=Object(s.c)(a.a._("Email {{ email }}"),{email:l});return t?(i=a.a._("Done!","Text that lets the user know we sent the board invite email"),c=function(){}):(i=p?a.a._("Click to send!","Text that lets the user know they can successfully send a board invite email"):a.a._("Keep typing!","Text that lets a user know the email they are typing is not valid yet"),c=function(){return p?n(e):void 0}),r.createElement(d,{body:i,img:f,onClick:c,selected:t,title:m,valid:p})}}(t,e.isIdSelected[t.id],e.handleCollaboratorClick)}).map(function(e,t){return o.a.createElement("li",{key:t},e)}),m=p?o.a.createElement(u.P,{onTouch:this.handleToggleCollabList},o.a.createElement(u.d,null,o.a.createElement(u.b,{display:"flex",alignItems:"center",justifyContent:"between",paddingX:3,marginTop:3,marignBottom:1,paddingY:3},o.a.createElement(u.K,{size:"md"},a.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create")),o.a.createElement(u.n,{accessibilityLabel:"",icon:l?"arrow-down":"arrow-forward"})))):o.a.createElement(u.b,{paddingX:3,marginBottom:4,marginTop:3,paddingY:3},o.a.createElement(u.K,{size:"md"},a.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create")));return o.a.createElement(u.b,{display:"flex",direction:"column",height:"100%"},m,(p&&l||!p)&&o.a.createElement(o.a.Fragment,null,o.a.createElement(u.b,{paddingX:3,marginTop:2,marginBottom:4,width:"100%"},o.a.createElement(u.b,{dangerouslySetInlineStyle:{__style:{borderRadius:"4px"}},color:"lightGray",flex:"grow",display:"flex",alignItems:"center",height:40,position:"relative"},o.a.createElement(u.b,{paddingX:4,height:"100%",position:"absolute",top:!0,left:!0,display:"flex",alignItems:"center"},o.a.createElement(u.n,{accessibilityLabel:"",icon:"search",size:20})),o.a.createElement(c.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:n},o.a.createElement(i.a,{className:"SearchBoxInput",onChange:this.handleTextFieldChange,placeholder:a.a._("Search by name or email"),value:n})))),o.a.createElement(u.b,{paddingX:3,overflow:"scrollY"},o.a.createElement("ul",null,f))))}}])&&m(n.prototype,l),_&&m(n,_),t}();g(_,"defaultProps",{shareSuggestions:[]});t.a=Object(l.b)({name:"ShareSuggestionsResource",key:"shareSuggestions"},{allowStale:!1})(_)},Kqiz:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=n("Ivf5"),i=n("JXQe"),c=n("D+W/"),l=n("ivDc"),s=n("Qo1m"),u=n("Reqc"),d=n("AlW1"),p=n("9Y9K"),f=n("UmN8"),m=n("kIql"),h=n("+U6O");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=function(e){function t(){var e,n,r,o,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return r=this,o=(e=g(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==b(o)&&"function"!=typeof o?_(r):o,a=_(_(n)),c=function(e){e.preventDefault(),n.props.onBoardCreate()},(i="handleBoardCreateFormSubmit")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,a,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.createBoardError,n=e.inputName,r=e.nameValidatorErrors,a=e.onCancel,d=e.onChangeBoardName,p=e.onChangeBoardPrivacy,m=e.onInvite,b=e.privacy,y=e.saving,g=e.showTitle,v=e.isAdAccountOwner,_=e.viewer,S=0===r.length,E=b===c.a.BoardPrivacy.SECRET,w=_.isAuth&&0===_.boardCount;return o.a.createElement(h.b,{color:"white",height:"100%",position:"absolute",width:"100%",top:!0,left:!0},o.a.createElement("form",{onSubmit:this.handleBoardCreateFormSubmit,style:{height:"100%"}},o.a.createElement(h.b,{direction:"column",display:"flex",height:"100%"},g&&o.a.createElement(h.b,{display:"flex",marginTop:3,paddingX:6,paddingY:3},o.a.createElement(h.K,{size:"xl",bold:!0},s.a._("Create board"))),o.a.createElement(h.b,{padding:3},o.a.createElement(h.b,{marginBottom:2},o.a.createElement(h.q,{htmlFor:"boardEditName"},o.a.createElement(h.K,null,s.a._("Name")))),o.a.createElement(h.b,null,o.a.createElement(l.a,{error:r.join(", "),id:"boardEditName",name:"boardName",onChange:function(e){var t=e.value;return d(t)},placeholder:s.a._('Like "Places to Go" or "Recipes to Make"'),value:n}))),o.a.createElement(h.j,null),v&&o.a.createElement(o.a.Fragment,null,o.a.createElement(h.b,{padding:3},o.a.createElement(h.b,{marginBottom:2},o.a.createElement(h.q,{htmlFor:"secret"},o.a.createElement(h.K,null,s.a._("Secret","secret board")))),o.a.createElement(h.b,null,o.a.createElement(h.I,{onChange:p,id:"secret",switched:E}))),o.a.createElement(h.j,null),o.a.createElement(h.b,{display:"flex",flex:"grow",overflow:"hidden"},o.a.createElement(h.b,{width:"100%"},o.a.createElement(f.a,{name:"web_collaborators_in_board_create_v3",isEligible:w},function(e){var t=e.anyEnabled;return o.a.createElement(i.a,{onSelectedCollaboratorsChange:m,inCollabInBoardCreateExperiment:t})}))),o.a.createElement(h.j,null)),!v&&o.a.createElement(o.a.Fragment,null,o.a.createElement(h.b,{padding:3},o.a.createElement(h.b,{marginBottom:2},o.a.createElement(h.q,{htmlFor:"protected"},o.a.createElement(h.K,null,s.a._("Protected board (not listed on user's profile)","protected board")))),o.a.createElement(h.b,null,o.a.createElement(h.I,{onChange:function(){},id:"protected",switched:!0,disabled:!0}))),o.a.createElement(h.j,null)),o.a.createElement(h.b,{padding:6},!!t&&o.a.createElement(h.b,{marginBottom:3},o.a.createElement(h.K,{align:"center",bold:!0,color:"red",size:"sm"},t)),o.a.createElement(h.b,{display:"flex",justifyContent:"between"},o.a.createElement(h.c,{inline:!0,onClick:a,text:s.a._("Cancel","cancel board create")}),o.a.createElement(u.a,{disabled:!n.trim()||!S||!!t||y,submitting:y,text:s.a._("Create","create a new board")}))))))}}])&&y(n.prototype,a),d&&y(n,d),t}(),E=Object(p.compose)(m.a,d.a)(S),w=n("vBjq"),O=n("Y2BC"),C=n("OUI7"),j=n("cSL5");function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var R=function(e){function t(){var e,n,r,o,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return r=this,o=(e=x(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==k(o)&&"function"!=typeof o?I(r):o,a=I(I(n)),c=function(e){var t=n.props,r=t.board,o=t.sectionsResource.data;return e.length>=j.a?[{items:Object(C.a)([r],e),customProps:{inSectionSelection:!0}},{items:Object(C.a)(o,e,"title")}]:[{items:[r],customProps:{inSectionSelection:!0}},{items:o}]},(i="getSections")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.sectionsResource,n=t.error,r=t.isLoaded,a=e.boardSavedTo,i=e.isSelectMode,c=e.onSectionCreate,l=e.onSectionSelected,u=e.pinId;return o.a.createElement(j.b,{isSelectMode:i,boardSavedTo:a,createButtonLabel:s.a._("Add section","Button for creating a board section"),hasLoadError:!!n,isLoaded:r,getSections:this.getSections,onCreate:c,onSelected:l,pinId:u})}}])&&P(n.prototype,a),i&&P(n,i),t}(),B=Object(O.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:function(e){return{board_id:e.board.id}}})(R),L=n("7Iyi");function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=2,K=3,U=void 0,z=function(e){var t=[],n=[];return e.forEach(function(e){e.name.match(/^\d/)?n.push(e):t.push(e)}),t.concat(n)};function q(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){H(e,t,n[t])})}return e}({},e?{pin_id:e}:{},t?{username:t}:{},n?{advertiser_id:n,filter:"protected"}:{},{field_set_key:"board_picker",limit:U,shortlist_suggestions:W})}var G=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=F(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==A(o)&&"function"!=typeof o?M(r):o,H(M(M(n)),"getSections",function(e){var t=n.props.boardResource.data;if(!t)return[];var r=t.all_boards,o=t.boards_shortlist,a=z(r);return a.length<=K?[{items:a}]:e.length>=j.a?[{items:Object(C.a)(a,e)}]:[o.length?{items:o,title:s.a._("Top choices")}:{items:[]},{items:a,title:s.a._("All boards","title for board picker all boards section")}]}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.boardResource,n=t.data,r=t.error,a=t.isLoaded,i=e.boardSavedTo,c=e.isSelectMode,l=e.onBoardCreate,s=e.onBoardSelected,u=e.pinId,d=a&&!!n&&n.all_boards.length<=K;return o.a.createElement(j.b,{isSelectMode:c,boardSavedTo:i,hasLoadError:!!r,hasLowBoardCount:d,isLoaded:a,getSections:this.getSections,onCreate:l,onSelected:s,pinId:u})}}])&&D(n.prototype,a),i&&D(n,i),t}();var Y=Object(p.compose)(Object(a.connect)(function(e){var t=e.advertiser,n=e.viewer;return n.isAuth&&t&&t.owner_user_id!==n.id?{advertiser_id:t.id,username:t.owner_user_id}:{}}),Object(O.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:function(e){return q(e.pinId,e.username,e.advertiser_id)}}))(G),Q=n("2Npu");function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=J(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==V(o)&&"function"!=typeof o?$(r):o,ee($($(n)),"state",{newName:"",selectedSectionBoard:n.props.boardWithSection||null,showCreate:n.props.showCreate||!1,inviteQueue:{}}),ee($($(n)),"close",function(){var e=n.state,t=e.selectedSectionBoard,r=e.showCreate,o=n.props.onClose;r?n.setState({showCreate:!1},n.manageModalTitle):t?n.setState({selectedSectionBoard:null},n.manageModalTitle):o()}),ee($($(n)),"sendInvites",function(e){var t=n.state.inviteQueue;Object.keys(t).forEach(function(n){t[n].resource(e.id,[n])})}),ee($($(n)),"handleInvite",function(e){var t=n.state.inviteQueue;if(t[e.id]){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ee(e,t,n[t])})}return e}({},t);delete r[e.id],n.setState({inviteQueue:r})}else{var o=Object.assign({},t,ee({},e.id,e));n.setState({inviteQueue:o})}}),ee($($(n)),"handleBoardCreate",function(e){var t=n.props.onBoardCreated;n.handleBoardSave(e,!0),t&&t(e)}),ee($($(n)),"handleBoardSave",function(e,t){var r=n.state.selectedSectionBoard,o=n.props,a=o.onBoardSave,i=o.invalidatePinBetterSaveResource;if((0,o.invalidateResource)(),i(),r&&"board_section"===e.type)return a(r,e,t);var c=e,l=c.section_count;!r&&(void 0===l?0:l)>0?n.setState({selectedSectionBoard:c},n.manageModalTitle):(n.sendInvites(e),a(c,void 0,t))}),ee($($(n)),"handleCreate",function(e){return function(t){t=t||"",n.setState({newName:t,showCreate:!0},n.manageModalTitle);var r=e?13105:13025,o=e?10306:249;n.props.contextLog(101,{component:r,element:o})}}),ee($($(n)),"manageModalTitle",function(){var e=n.props.setModalTitle,t=n.state,r=t.selectedSectionBoard,o=t.showCreate;e&&e(o&&r?s.a._("Add section","Repin title for making a board section"):o&&!r?s.a._("Create board","Repin title for making a new board"):r&&!o?s.a._("Choose section","Repin title for choosing a board section"):s.a._("Choose board","Repin title for choosing a board"))}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.boardSavedTo,n=e.isRepin,r=e.isSelectMode,a=e.pinId,i=e.setModalTitle,c=e.suggestedBoardTitle,l=this.state,s=l.inviteQueue,u=l.newName,d=l.selectedSectionBoard,p=l.showCreate,f=!!d,m=!i;return o.a.createElement(h.b,{display:"flex",width:"100%",position:"relative"},o.a.createElement(h.b,{width:"100%",display:"flex",direction:"column",marginTop:4},d?o.a.createElement(B,{isSelectMode:r,board:d,boardSavedTo:t,onSectionCreate:this.handleCreate(f),onSectionSelected:this.handleBoardSave}):o.a.createElement(Y,{isSelectMode:r,boardSavedTo:t,onBoardCreate:this.handleCreate(f),onBoardSelected:this.handleBoardSave,pinId:a})),p&&!d&&o.a.createElement(E,{prefilledName:u||c,onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,inviteQueue:s,showTitle:m}),p&&d&&o.a.createElement(w.a,{board:d,completeCreateSectionAction:this.handleBoardSave,initialName:u,isRepin:n,onClearModal:this.close,showTitle:m}))}}])&&X(n.prototype,r),a&&X(n,a),t}();var ne=Object(p.compose)(Q.a,Object(a.connect)(null,function(e,t){return{invalidateResource:function(){e(Object(L.f)("BoardPickerBoardsResource",q(t.pinId)))},invalidatePinBetterSaveResource:function(){e(Object(L.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))}}}))(te),re=n("iz36"),oe=n("UgxU"),ae=n("A6bX"),ie=n("UApa"),ce=n("XwKk"),le=n("dsfX");var se=n("RiVL");var ue=n("n/kK"),de=n("TYRv"),pe=n("aqOH"),fe=n("SMmS");function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=function(e){function t(){var e,n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return o=this,a=(e=be(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==me(a)&&"function"!=typeof a?ge(o):a,ve(ge(ge(n)),"state",{isFacebookChecked:n.props.resourceLoaded&&!!n.props.userSocial&&n.props.userSocial.facebook_publish_stream_enabled,isTwitterChecked:n.props.resourceLoaded&&!!n.props.userSocial&&n.props.userSocial.twitter_publish_enabled}),ve(ge(ge(n)),"handleTwitterCheckboxChanged",function(){var e=!n.state.isTwitterChecked;n.setState({isTwitterChecked:e}),n.props.onSocialConnect(de.default.TWITTER,e)}),ve(ge(ge(n)),"handleFacebookCheckboxChanged",function(){var e=!n.state.isFacebookChecked;e?ue.a.maybeRequestFbTimelinePermission({success:function(){n.setState({isFacebookChecked:!0}),pe.a.set("facebook_publish_stream_enabled",e),n.props.onSocialConnect(de.default.FACEBOOK,e)},error:function(){n.setState({isFacebookChecked:!1}),pe.a.set("facebook_publish_stream_enabled",!1),n.props.onSocialConnect(de.default.FACEBOOK,e)}}):(n.setState({isFacebookChecked:!1}),pe.a.set("facebook_publish_stream_enabled",!1),n.props.onSocialConnect(de.default.FACEBOOK,e))}),ve(ge(ge(n)),"renderFacebookShare",function(){return r.createElement(h.b,{display:"flex",alignItems:"center",marginLeft:2},r.createElement(h.e,{checked:n.state.isFacebookChecked,id:"share_facebook",onChange:n.handleFacebookCheckboxChanged,size:"sm"}),r.createElement(h.q,{htmlFor:"share_facebook"},r.createElement(h.b,{marginLeft:2},r.createElement(h.K,null,s.a._("Post to Facebook")))))}),ve(ge(ge(n)),"renderTwitterShare",function(){return r.createElement(h.b,{display:"flex",alignItems:"center",marginLeft:5},r.createElement(h.e,{checked:n.state.isTwitterChecked,id:"share_twitter",onChange:n.handleTwitterCheckboxChanged,size:"sm"}),r.createElement(h.q,{htmlFor:"share_twitter"},r.createElement(h.b,{marginLeft:2},r.createElement(h.K,null,s.a._("Post to Twitter")))))}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,r["Component"]),n=t,(o=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.resourceLoaded,n=e.userSocial;t&&n&&this.setState({isFacebookChecked:!!n.facebook_publish_stream_enabled,isTwitterChecked:!!n.twitter_publish_enabled})}},{key:"render",value:function(){var e=this.props,t=e.resourceLoaded,n=e.userSocial;if(!t||!n)return null;var o=n.connected_to_facebook,a=n.twitter_url;return!(!o&&!a)&&r.createElement(h.b,{display:"flex",padding:2},o&&this.renderFacebookShare(),a&&this.renderTwitterShare())}}])&&he(n.prototype,o),a&&he(n,a),t}(),Se=Object(p.compose)(Object(a.connect)(function(e){var t=e.viewer;return{userId:t.isAuth?t.id:""}}),Object(fe.b)({name:"UserResource",key:"userSocial",options:function(e){return{user_id:e.userId,field_set_key:"social_connect"}}}))(_e),Ee=n("4+0X"),we=n("ePT2"),Oe=n("Qcp0"),Ce=(n("rHfS"),n("bWet")),je=n("ms9C"),ke=n("FIpZ");function Pe(e){var t,n,o="-7 -7 30 30";switch(e.name){case"facebook":n=r.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#3B5998"}),t=r.createElement("path",{fill:"#fff",d:"M9.267 16V8.702h2.506l.376-2.845H9.267V4.041c0-.823.234-1.384 1.442-1.384l1.541-.001V.112A21.09 21.09 0 0 0 10.005 0C7.783 0 6.262 1.325 6.262 3.76v2.097H3.75v2.845h2.512V16h3.005z"});break;case"messenger":n=r.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#1DA1F2"}),t=r.createElement("path",{fill:"#fff",d:"M8 0C3.582 0 0 3.316 0 7.407c0 2.332 1.163 4.41 2.981 5.769V16l2.724-1.495c.727.201 1.497.31 2.295.31 4.418 0 8-3.317 8-7.408C16 3.317 12.418 0 8 0zm.795 9.975L6.758 7.802 2.783 9.975l4.372-4.642 2.087 2.173 3.926-2.173-4.373 4.642z"});break;case"pinterest":o="0 0 16 16",t=r.createElement("path",{fill:"#e60023",d:"M5.644 15.648A8.01 8.01 0 0 0 8 16a8 8 0 1 0-2.847-.521c-.073-.625-.151-1.655.017-2.378.145-.621.934-3.958.934 -3.958s-.238-.477-.238-1.183c0-1.107.642-1.934 1.44-1.934.68 0 1.008.51 1.008 1.122 0 .683-.435 1.705-.66 2.652-.187.792.398 1.439 1.18 1.439 1.416 0 2.504-1.493 2.504-3.647 0-1.907-1.37-3.24-3.327 -3.24-2.266 0-3.596 1.7-3.596 3.456 0 .684.264 1.418.593 1.817a.238.238 0 0 1 .055.229c-.06.252-.195.792-.221.903-.035.146-.116.177-.267.107C3.581 10.4 2.96 8.946 2.96 7.778c0-2.512 1.825-4.82 5.262-4.82 2.763 0 4.91 1.97 4.91 4.6 0 2.745-1.73 4.954-4.133 4.954-.807 0-1.566-.42-1.825-.914 0 0-.4 1.52-.496 1.893-.188.722-.71 1.637-1.033 2.157z"});break;case"link":n=r.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#EFEFEF"}),t=r.createElement("path",{fill:"#8e8e8e",d:"M6.555 7.236L4.848 8.943l-2.389 2.39 2.21 2.21 2.39-2.39 1.707-1.707.82.821a.92.92 0 0 1 .006 1.301l-4.166 4.167a.926.926 0 0 1-1.302-.005L.272 11.878a.92.92 0 0 1-.005-1.302L4.433 6.41a.924.924 0 0 1 1.302.005l.82.821zM9.45 8.764l1.707-1.707 2.389-2.389-2.21-2.211-2.39 2.389-1.707 1.707-.82-.82a.921.921 0 0 1-.006-1.302L10.578.265a.924.924 0 1 1.301.006l3.853 3.852a.92.92 0 0 1 .004 1.301l-4.165 4.167a.924.924 0 0 1-1.302-.006l-.82-.82zm-4.573.889l4.779-4.78 1.473 1.474-4.779 4.78-1.473-1.474z"});break;default:t=null}return r.createElement("svg",{width:"36",height:"36",viewBox:o},n,t)}var xe=n("dMYx");function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=Re(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Te(o)&&"function"!=typeof o?Le(r):o,Ae(Le(Le(n)),"state",{showShareLink:!1,pinterestProfileLink:"",fb:null}),Ae(Le(Le(n)),"selectText",function(e){e.target.select()}),Ae(Le(Le(n)),"openSocialDialog",function(e,t){var r,o=n.props,a=o.handleShare,i=o.dismissModal,c=o.experienceComplete;switch(e){case"facebook":Ce.default.logIn(n.state.fb,function(){je.a.shareFacebookInvite(n.getShareOptions(5))});break;case"messenger":Ce.default.logIn(n.state.fb,function(){je.a.shareFbMessengerInvite(n.getShareOptions(6))});break;case"link":r=n.getShareOptions(12),je.a.createAndLogShareInvite(r).then(function(e){var t=e.invite_url;t?n.setState({pinterestProfileLink:t,showShareLink:!0}):a&&a()});break;default:a&&a()}"link"!==e&&(c&&c(),i(!0))}),Ae(Le(Le(n)),"handleShareLinkDismiss",function(e){n.setState({showShareLink:!1})}),Ae(Le(Le(n)),"handleFacebookClick",function(e){n.openSocialDialog("facebook",e)}),Ae(Le(Le(n)),"handleMessengerClick",function(e){n.openSocialDialog("messenger",e)}),Ae(Le(Le(n)),"handlePinterestClick",function(e){n.openSocialDialog("pinterest",e)}),Ae(Le(Le(n)),"handleLinkClick",function(e){n.openSocialDialog("link",e)}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;Ce.default.ensureInit(function(t){return e.setState({fb:t})})}},{key:"getShareOptions",value:function(e){var t=this.props.pin;return{invite_channel:e,object_type:xe.a.PIN,object_id:t.id,name:"",description:t.description||"",path:"/pin/".concat(t.id,"/"),picture:t.images&&t.images["236x"]&&t.images["236x"].url||""}}},{key:"render",value:function(){var e=this.props.close,t=this.state,n=t.pinterestProfileLink,r=t.showShareLink,a=o.a.createElement(ke.a,{link:n,handleClick:this.handleShareLinkDismiss,handleFocus:this.selectText}),i=function(e,t,n){var i="share-upsell-label-"+e,c="";return"facebook"===e?c="#3b5998":"messenger"===e&&(c="#1da1f2"),"link"===e&&r?a:o.a.createElement(h.P,{onTouch:function(e){var t=e.event;return n(t)},fullWidth:!1},o.a.createElement(h.b,{display:"flex",paddingY:2,alignItems:"center"},o.a.createElement(Pe,{name:e}),o.a.createElement(h.h,{xs:1}),o.a.createElement("div",{id:i},o.a.createElement(h.K,{size:"xl",bold:!0},o.a.createElement("span",{style:{color:c}},t)))))};return o.a.createElement(h.b,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},o.a.createElement("div",null,o.a.createElement(h.b,{paddingX:6,flex:"none"},o.a.createElement(h.b,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:16,right:16}}},o.a.createElement(h.o,{icon:"cancel",onClick:e,accessibilityLabel:s.a._("Cancel"),size:"sm"})),o.a.createElement(h.m,{size:"md"},s.a._("Saved!","Save pin to board")),o.a.createElement(h.b,{paddingY:3,marginRight:8},o.a.createElement(h.K,{size:"xl"},s.a._("Know someone who might like it?","Upsell share a recently saved pin to board"))),o.a.createElement(h.b,{paddingY:2,flex:"none"},i("facebook",s.a._("Send on Facebook"),this.handleFacebookClick),i("messenger",s.a._("Send on Messenger"),this.handleMessengerClick),i("pinterest",s.a._("Send on Pinterest"),this.handlePinterestClick),i("link",s.a._("Send a link"),this.handleLinkClick)))),o.a.createElement(h.h,{xs:1}))}}])&&Ie(n.prototype,a),i&&Ie(n,i),t}(),Fe=n("KCDi"),Ne=n("KsVg"),Me=n("CAUj"),He=n("VSY/"),We=n("MFVv"),Ke=n("3Wjl"),Ue=n("2YES"),ze=n("evwu"),qe=n("lixz");function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ze(e,t,n[t])})}return e}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return et}),n.d(t,"d",function(){return at}),n.d(t,"b",function(){return st}),n.d(t,"c",function(){return dt});var $e=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>…)]+/gi,et=4e3,tt=660,nt="236x",rt="PinPanePinMeta",ot=236,at={LOADING:"loading",SUCCESS:"success"},it=function(e){function t(){var e,n,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return a=this,i=(e=Ve(t)).call.apply(e,[this].concat(l)),n=!i||"object"!==Ge(i)&&"function"!=typeof i?Je(a):i,Ze(Je(Je(n)),"state",{pinDescription:n.props.pin&&n.props.pin.description||"",showSharingUpsell:!1,resolve:void 0,displaySuccessAnimation:!1,experienceComplete:function(){},experienceDismiss:function(){},newPin:null,boardSavedTo:null,height:0,sharing:{facebook:!1,twitter:!1},modalTitle:n.props.showCreate?s.a._("Create board"):s.a._("Choose board")}),Ze(Je(Je(n)),"pinImageRef",Object(r.createRef)()),Ze(Je(Je(n)),"setModalTitle",function(e){return n.safeSetState({modalTitle:e})}),Ze(Je(Je(n)),"setPWTSaveRequestTiming",function(e,t){e?(n.setPWTAbort(),Object(qe.e)({name:"PinSaveRequestStartTraceEvent"})):t&&Object(qe.f)({name:"PinSaveRequestStopTraceEvent",result:t})}),Ze(Je(Je(n)),"getPinHeight",function(){var e=(n.props.pin.images[ot+"x"]||{}).height||0,t=document.getElementById(rt);return t&&e?t.clientHeight+e:0}),Ze(Je(Je(n)),"unmounted",!1),Ze(Je(Je(n)),"safeSetState",function(e,t){n.unmounted?t&&t():n.setState(e,t)}),Ze(Je(Je(n)),"scrollToRelatedPins",function(){document&&document.documentElement&&"scrollBehavior"in document.documentElement.style?window.scroll({top:n.state.height,left:0,behavior:"smooth"}):window.scrollTo(0,n.state.height)}),Ze(Je(Je(n)),"handleBoardSaveSuccess",function(e,t,r,o){var a=n.props,i=a.action,c=a.dispatch,l=a.pin,u=a.requestContext,d=a.setCompletionPromise,p=a.viewerUserId;oe.a.instance.refreshPlacedExperiences(),n.setPWTSaveRequestTiming(!1,1);var f=oe.a.instance.getPlacedExperience(33),m=oe.a.instance.getPlacedExperience(11),h=(u.experiments.v2GetGroup("web_board_create_delight")||"").startsWith("enabled");if(d(n._makeCancelablePromise(new Promise(function(t,a){var l=e.resource_response.data;n._triggerPubSubs(l);var u=n.state.pinDescription.match($e)||[];u.length>0&&n.props.contextLog(2,{element:10273,hashtags:JSON.stringify(u),objectId:n.props.pin.id}),"repin"===i?(n._fetchBoardRecommendation(l).then(function(e){n._showSuccessToast(e,l,r)}),f&&500388===f.experience_id?n.safeSetState({showSharingUpsell:!0,newPin:l,resolve:t}):o&&h?n.safeSetState({displaySuccessAnimation:!0,modalTitle:s.a._("Board created","Modal title after creating a new board"),newPin:l,resolve:t}):t(l)):("create"===i&&m&&500840===m.experience_id&&(c({type:"PIN_CREATED_VIA_CREATOR_CHECKLIST",payload:{pin_created_via_creator_checklist:!0}}),n.props.contextLog(7510,{component:13233})),t(l))}))),c(Object(ze.c)(t)),c(Object(Me.d)({boardId:t.id,sectionId:r&&r.id,increment:1})),p&&c(Object(Ke.a)({userId:p,increment:1})),r||!t.image_cover_url){var b=l.image_url,y=l.images;t.image_cover_url=b||y[nt]&&y[nt].url||"",c(Object(ze.d)({},t))}r&&c(Object(ae.a)(r.id)),c({type:"PIN_SAVE",payload:{pinId:l.id,saved:!0}})}),Ze(Je(Je(n)),"_adjustHeightToPin",function(){0===n.state.height&&(n.safeSetState({height:tt}),n.props.onHeightChange&&n.props.onHeightChange(tt))}),Ze(Je(Je(n)),"close",function(){var e=n.props,t=e.contextLog,r=e.onClose;n.experienceDismiss&&n.experienceDismiss(),r&&(n.setPWTAbort(),r(),t(2502,{component:5,element:610}))}),Ze(Je(Je(n)),"handleSaveToBoard",function(e,t,r){if(!n.state.boardSavedTo){n.setPWTSaveRequestTiming(!0);var o="secret"===(e.privacy||""),a={board:t?t.id:e.id,state:at.LOADING};n.safeSetState({boardSavedTo:a},function(){n._getPinResource(o,e.id,(t||{}).id).callCreate({showError:!0}).then(function(o){n.safeSetState({boardSavedTo:Object.assign(a,{state:at.SUCCESS})},function(){return n.handleBoardSaveSuccess(o,e,t,r)})}).catch(function(e){n.unmounted||n.safeSetState({boardSavedTo:null}),n.setPWTSaveRequestTiming(!1,3);var t=n._makeCancelablePromise(Promise.reject(e));n.props.setCompletionPromise(t)})})}}),Ze(Je(Je(n)),"handleSocialConnectSet",function(e,t){var r=Object.assign({},n.state.sharing);e===de.default.FACEBOOK?r.facebook=t:e===de.default.TWITTER&&(r.twitter=t),n.safeSetState({sharing:r})}),Ze(Je(Je(n)),"updateDescription",function(e){n.safeSetState({pinDescription:e})}),Ze(Je(Je(n)),"handleLogToastClick",function(){n.props.contextLog(101,{component:20,view:52})}),Ze(Je(Je(n)),"_makeCancelablePromise",function(e){var t=!1;return{promise:new Promise(function(n,r){e.then(function(e){return t?r({isCanceled:!0}):n(e)}),e.catch(function(e){return r(t?{isCanceled:!0}:e)})}),cancel:function(){t=!0}}}),Ze(Je(Je(n)),"_getPinResource",function(e,t,r){var o,a=n.props,i=a.color,c=a.location,l=a.pin,s=a.method,u=a.guid,d=a.additionalCreateFields,p=a.advertiser_id;l.id&&(o=Object(ce.a)(l,c)||"".concat(l.tracking_params,"~0"));var f=l.id?"RepinResource":"PinResource",m=!l.id&&l.image_url?Object(We.b)(l.image_url,l.link):"",h=Ye({},d,{board_id:t||"",color:i||"",clientTrackingParams:o,description:n.state.pinDescription,guid:u||"",link:l.link,image_base64:l.image_base64,image_url:m,is_buyable_pin:!1,is_removable:l.promoted_is_removable,media_upload_id:l.media_upload_id,method:s||"",pin_id:l.id||"",section:r,title:l.title||""},p?{advertiser_id:p}:{});if(!e){var b=n.state.sharing,y=b.facebook,g=b.twitter;h.share_facebook=y,h.share_twitter=g}return we.a.create(f,h)}),Ze(Je(Je(n)),"_triggerPubSubs",function(e){Ee.a.instance.publish("currentUser","pinCreated",e),Ee.a.instance.publish(e.board.id,"pinCreated",{pin:e})}),Ze(Je(Je(n)),"_showSuccessToast",function(e,t,r){var a=n.props,i=a.hideAllToasts,c=a.showSuccessToast,l=a.showToast;if(c&&!n.state.showSharingUpsell){i();var u,d=t.board,p=d.image_cover_url,f=d.name,m=d.url;if(u=r?[Object(He.c)(s.a._("Saved to {{sectionName}} in {{boardName}}","Toast for successfully saving to a section within a board"),{sectionName:r.title,boardName:f})]:[s.a._("Saved to"),f],l(function(e){var t=e.onHide;return o.a.createElement(Fe.a,{duration:et,onHide:t,text:u,href:r?"".concat(m).concat(r.slug):m,imageUrl:p,onClick:n.handleLogToastClick})}),e){var h=e.name,b=e.url,y=e.image_thumbnail_url;l(function(e){var t=e.onHide;return o.a.createElement(Fe.a,{duration:et,onHide:t,text:[s.a._("You might also like","Post repin suggested board"),h],href:b,imageUrl:y,onClick:n.handleLogToastClick})})}}}),Ze(Je(Je(n)),"_fetchBoardRecommendation",function(e){return we.a.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(function(e){return Promise.resolve(e.resource_response.error?null:e.resource_response.data[0])})}),Ze(Je(Je(n)),"dismissModal",function(e){var t=n.state,r=t.resolve,o=t.newPin;n.experienceDismiss&&!e&&n.experienceDismiss(),r&&r(o)}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.boardWithSection,n=e.showCreate;this._adjustHeightToPin(),t&&n?this.setModalTitle(s.a._("Create section","modal title for create section pane")):t&&!n&&this.setModalTitle(s.a._("Choose section","modal title for choose section"))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.safeSetState({pinDescription:e.pin&&e.pin.description||e.description||""})}},{key:"componentDidUpdate",value:function(){this._adjustHeightToPin()}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"setPWTAbort",value:function(){Object(qe.f)({name:"BoardPickerUserNavStopTraceEvent",result:{COMPLETE:1,USER_ABORT:2,RESPONSE_ERROR:3,RESPONSE_TIMEOUT:4,NETWORK_ERROR:5,CLIENT_SOFTWARE_ERROR:6,OTHER:7,NAVIGATE_AWAY:8,EXIT_APP:9,BACKGROUND_APP:10,COMPLETE_WITHOUT_CONTENT:11}.ABORTED})}},{key:"render",value:function(){var e=this;if(!this.props.pin&&!this.props.resourceLoaded)return null;var t=this.props,n=t.color,a=t.pin,i=t.isInModal,c=t.onCloseAndShare,l=t.sensitiveContentNotice,u=t.showCreate,d=t.suggestedBoardTitle,p=this.state,m=p.boardSavedTo,b=p.displaySuccessAnimation,y=p.height,g=p.newPin,v=p.showSharingUpsell,_=null;g&&g.board&&(_=g.board.name);var S=y||660,E=l&&l.title||this.state.modalTitle,w=l?o.a.createElement(Oe.a,{notice:l,inModal:!0}):o.a.createElement(h.b,{position:"relative",height:S,width:"100%",display:"flex",justifyContent:"center"},o.a.createElement(h.b,{color:"white",display:"flex",height:"100%",overflow:"hidden",position:"relative",shape:"rounded",width:"100%"},o.a.createElement(h.b,{width:"40%",direction:"column",display:"flex",justifyContent:"between",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid #f5f5f5"}}},o.a.createElement(h.b,{display:"flex",flex:"grow",alignItems:"center",justifyContent:"start",direction:"column",marginTop:3},o.a.createElement(se.a,{color:n,pin:a,pinImageRef:this.pinImageRef,updateDescription:this.updateDescription})),o.a.createElement(Se,{onSocialConnect:this.handleSocialConnectSet})),v?o.a.createElement(re.a,{placementId:33,experienceIds:[500388]},function(t){var n=t.complete,r=t.dismiss;t.display_data;return e.experienceComplete=n,e.experienceDismiss=r,o.a.createElement(De,{handleShare:c,close:e.close,experienceComplete:n,pin:a,dismissModal:e.dismissModal})}):o.a.createElement(h.b,{display:"flex",width:"60%"},o.a.createElement(ne,{boardSavedTo:m,boardWithSection:this.props.boardWithSection,isRepin:!0,onBoardCreated:this.props.onBoardCreated,onBoardSave:this.handleSaveToBoard,onClose:this.close,pinId:a.id,showCreate:u,suggestedBoardTitle:d,setModalTitle:i?this.setModalTitle:void 0}))),o.a.createElement(f.a,{name:"web_board_create_delight"},function(t){var n=t.anyEnabled;return o.a.createElement(r.Fragment,null,n&&b&&o.a.createElement(ie.b,{onDismiss:e.dismissModal,pin:a,pinImageRef:e.pinImageRef,selectedBoardName:_}))}));return i?o.a.createElement(le.a,{accessibilityCloseLabel:s.a._("Close"),accessibilityModalLabel:E,onDismiss:this.close,heading:E,size:"lg"},w):w}}])&&Qe(n.prototype,a),i&&Qe(n,i),t}();function ct(e){var t=e.advertiser,n=e.viewer,r=e.location,o=n.isAuth&&t&&t.owner_user_id!==n.id?t.id:null;return Ye({location:r},o?{advertiser_id:o}:{},n.isAuth?{viewerUserId:n.id}:{})}Ze(it,"defaultProps",{pwtAuxData:{}});var lt=Object(p.compose)(Object(a.connect)(ct),Ue.e,Ne.a,Q.a,Object(fe.b)({name:"FakePinResource",key:"pin",options:function(e){return Ye({},e.fakeResource.options)}}))(it);function st(e){return o.a.createElement(lt,Object.assign({action:"create"},e))}var ut=Object(p.compose)(Object(a.connect)(ct),Ue.e,Ne.a,Q.a)(it);function dt(e){return o.a.createElement(ut,Object.assign({action:"repin"},e))}},LxOv:function(e,t,n){"use strict";var r=n("aqOH"),o=function(e){var t=document.documentElement,n=t.scrollWidth-t.clientWidth,o=t.scrollHeight-t.clientHeight;e&&(n=Math.max(n,0),o=Math.max(o,0)),r.a.isAuthenticated()||(o=340),window.resizeBy(n,o)},a={};a.open=function(e,t,n){var r=function(e,t){var n=screen.width,r=screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+e+",height="+t+",left="+Math.round((n-e)/2)+",top="+(r>t?Math.round((r-t)/2):0)}(t,n);window.open(e,void 0,r)},a.shrinkWrap=function(){o(!1)},a.contain=function(){o(!0)},a.resizeViewPort=function(e,t){window.outerWidth?window.resizeTo(e+(window.outerWidth-window.innerWidth),t+(window.outerHeight-window.innerHeight)):(window.resizeTo(500,500),window.resizeTo(e+(500-document.body.offsetWidth),t+(500-document.body.offsetHeight)))},t.a=a},MFVv:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var r=n("D+W/"),o=function(e,t){if(!t)return e;var n=new RegExp(/http(s?):/);if(!n.test(e)){var r=n.exec(t);if(r&&r.length)e=r[0]+e}return e},a=function(e){var t=r.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION;return{clamped:e.length>50?e.slice(0,50).trim()+"…":e,full:e.length>t?e.slice(0,t):e}}},"QMJ+":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("GyhR"),o=n("D+W/"),a=n("q579"),i=n("+U6O");function c(e){var t=e.url,n=e.description,c=e.color;return c=c||o.a.DEFAULT_IMAGELESS_PIN_COLOR,r.createElement(i.b,{shape:"rounded",height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:c}}},r.createElement(i.b,{maxHeight:200,padding:4,overflow:"hidden"},t&&r.createElement(i.b,{marginBottom:2},r.createElement(i.K,{color:"white",size:"xs"},a.a.parse(t).hostname||t)),r.createElement(i.b,{maxHeight:144},r.createElement(i.K,{bold:!0,color:"white",overflow:"normal",size:"lg"},n))))}},Qcp0:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=n("iJ35"),i=n("+U6O");function c(e){var t=e.action,n=e.alignCenter,r=t.title,c=t.description,l=t.button,s=r&&r.text,u=c&&c.text,d=l&&l.text||"",p=l&&l.link||"",f=l&&d&&p.startsWith("http");return o.a.createElement(i.b,null,!!s&&o.a.createElement(i.b,{marginBottom:1},o.a.createElement(i.K,{bold:!0,align:n?"center":"left"},s)),!!u&&o.a.createElement(i.b,{marginBottom:1},o.a.createElement(i.K,{align:n?"center":"left"},u)),f&&o.a.createElement(i.b,{marginBottom:1},o.a.createElement(a.b,{to:p},o.a.createElement(i.c,{text:d,color:"white"}))))}n.d(t,"a",function(){return u});var l={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},s={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"};function u(e){var t=e.inModal,n=e.notice,r=n.title,a=n.description,u=n.actions,d=void 0===u?[]:u,p=a&&a.text||"",f=1===d.length;return o.a.createElement(i.b,{shape:"rounded",padding:6,dangerouslySetInlineStyle:{__style:t?s:l}},!!r&&!t&&o.a.createElement(i.b,{marginBottom:2,display:"flex"},o.a.createElement(i.m,{size:"xs"},r)),!!p&&o.a.createElement(i.b,{marginBottom:4},o.a.createElement("span",{style:{whiteSpace:"pre-wrap"}},o.a.createElement(i.K,{overflow:"normal",align:t?"center":"left"},p))),!!d.length&&o.a.createElement(i.b,{display:"flex",wrap:!0,marginStart:-2,marginEnd:-2,direction:t?"column":"row"},d.map(function(e){return o.a.createElement(i.b,{column:t||f?12:6,paddingY:1,paddingX:2,key:JSON.stringify(e)},o.a.createElement(c,{action:e,alignCenter:t||f}))})))}},RiVL:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=n("Qo1m"),i=n("Y2BC"),c=n("Irlq"),l=n("+U6O"),s=185;var u=Object(i.b)({name:"PinSaveStatusResource",key:"saveStatusResource",options:function(e){return{id:e.pin.id}}},{allowStale:!1})(function(e){var t=e.saveStatusResource.data;return t&&t.pinned_to_board?o.a.createElement(l.b,null,o.a.createElement(l.b,{color:"orange","data-test-id":"already-pinned",display:"flex",padding:3,shape:"rounded",width:s},o.a.createElement(l.K,{align:"center",bold:!0,color:"white",size:"sm"},Object(c.b)(a.a._("Psst! You already saved this Pin to {{ board_name }} ","Toast for already having repinned pin"),{board_name:(t.pinned_to_board||{}).name}).join(" "))),o.a.createElement(l.b,{display:"flex",justifyContent:"center",marginTop:-3},o.a.createElement(l.n,{accessibilityLabel:"",color:"orange",icon:"heart",size:26}))):null}),d=n("P4K9"),p=n("QMJ+");n("hvnN");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(e,n){var r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=h(t).call(this,e,n),r=!a||"object"!==f(a)&&"function"!=typeof a?y(o):a,g(y(y(r)),"handleChange",function(e){r.props.onChange&&r.props.onChange.call(y(y(r)),e.target.value,e.target.selectionStart),r.setState({value:e.target.value})}),g(y(y(r)),"updateCursor",function(e){r.props.onCursorChange&&r.props.onCursorChange(e.target.selectionStart)}),g(y(y(r)),"handleKeyUp",function(e){r.props.onKeyUp&&r.props.onKeyUp(e),r.updateCursor(e)}),g(y(y(r)),"handleKeyDown",function(e){r.props.onKeyDown&&r.props.onKeyDown(e)}),g(y(y(r)),"handleFocus",function(e){r.props.onFocus&&r.props.onFocus(e),r.updateCursor(e)}),g(y(y(r)),"handleBlur",function(e){r.props.onBlur&&r.props.onBlur(e)}),g(y(y(r)),"handleClick",function(e){r.props.onClick&&r.props.onClick(e),r.updateCursor(e)}),r.state={isFocused:r.props.focused||!1,value:r.props.value},r}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this.focusIfNeeded()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({isFocused:e.focused,value:e.value})}},{key:"componentDidUpdate",value:function(){this.focusIfNeeded()}},{key:"focusIfNeeded",value:function(){this.state.isFocused&&document.activeElement!==this._textArea&&this._textArea.focus()}},{key:"select",value:function(){this._textArea.select()}},{key:"render",value:function(){var e=this,t=this.props;return o.a.createElement("textarea",{className:t.className,cols:t.cols,disabled:t.disabled?"disabled":"",id:t.id,name:t.name,onBlur:this.handleBlur,onChange:this.handleChange,onClick:this.handleClick,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,placeholder:t.placeholder,ref:function(t){e._textArea=t},rows:t.rows,style:t.style,value:this.state.value})}}])&&m(n.prototype,a),i&&m(n,i),t}();v.defaultProps={validators:[]};var _=function(e){var t=e.allowChange,n=e.description,o=e.editing,i=e.onHandleDescriptionBlur,c=e.onHandleDescriptionEdit,s=e.onRefTextArea,u=e.onChange,d=e.onCursorChange,p=function(e){var t=e.description,n=e.editing,o=e.allowChange;return r.createElement(l.b,{display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1},r.createElement(l.b,{paddingX:1,overflow:"hidden"},r.createElement(l.K,{bold:!0,color:t.clamped?"darkGray":"gray",size:"sm"},t.clamped?t.clamped:a.a._("Tell us about this Pin..."))),r.createElement(l.b,{paddingX:1},!n&&o&&r.createElement(l.n,{accessibilityLabel:a.a._("Edit description"),icon:"edit"})))};return r.createElement(l.b,{mdDisplay:"flex"},o?r.createElement(v,{focused:!0,onBlur:i,onFocus:t&&c,onChange:u,onCursorChange:d,placeholder:a.a._("Tell us about this Pin..."),style:t&&{outline:"none",maxHeight:120,minHeight:60,width:"100%"},ref:s,rows:3,value:n.full}):r.createElement(l.b,{width:"100%"},t?r.createElement(l.P,{onTouch:c},r.createElement(p,{description:n,editing:o,allowChange:t})):r.createElement(p,{description:n,editing:o,allowChange:t})))},S=n("MFVv"),E=n("2Npu");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*/,T=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/,I=0,R="g",B=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=C(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==w(o)&&"function"!=typeof o?k(r):o,P(k(k(n)),"state",{cursorIndex:-1,flyoutCursorIndex:-1,description:n.props.pin&&n.props.pin.description&&n.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,editedBefore:!1,flyoutOpened:!1}),P(k(k(n)),"onDescriptionChange",function(e,t){var r=new RegExp(x,R),o="";if(t<e.length){for(var a=r.exec(e),i=r.lastIndex<t;a&&i;)a=r.exec(e),i=r.lastIndex<t;var c=!!a&&x.test(e.slice(a.index,t));i=!!a&&a.index<t,a&&c&&i&&(o=a[I])}else{var l=T.exec(e);o=l?l[I]:""}n.updateDescription(e);var s=x.test(o),u=n.state.isHashtagFlyoutOpen?n.state.flyoutCursorIndex:e.slice(0,t).lastIndexOf("#");n.setState({cursorIndex:t,flyoutCursorIndex:u,description:e,hashtagQuery:o,isHashtagFlyoutOpen:s,flyoutOpened:n.state.flyoutOpened||s})}),P(k(k(n)),"onCursorChange",function(e){var t=n.state,r=t.isHashtagFlyoutOpen,o=t.flyoutCursorIndex;r&&e<o&&n.setState({isHashtagFlyoutOpen:!1})}),P(k(k(n)),"updateDescription",function(e){n.props.updateDescription&&n.props.updateDescription(e)}),P(k(k(n)),"handleDescriptionBlur",function(e){var t=e.target.value.trim(),r=n.state.isHashtagFlyoutOpen;n.updateDescription(t),n.setState({description:t,editing:r})}),P(k(k(n)),"handleDescriptionEdit",function(){n.setState({editing:!0,editedBefore:!0})}),P(k(k(n)),"handleHashtagAddition",function(e){var t=n.props;(0,t.contextLog)(101,{component:208,element:10249,hashtags:e,objectId:t.pin.id});var r=n.state.flyoutCursorIndex,o=Number(r+n.state.hashtagQuery.length),a=n.state.description.slice(0,r)+e+" "+n.state.description.slice(o);n.updateDescription(a),n.setState({description:a,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})}),P(k(k(n)),"handleRefTextArea",function(e){n._textArea=e}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.color,r=t.isFirstPin,a=t.pin,i=t.pinImageRef,c=this.state,s=c.description,f=c.editing,m=c.flyoutOpened,h=c.hashtagQuery,b=c.isHashtagFlyoutOpen,y=a.images,g=a.link,v=y&&y["236x"],E=v&&v.url||a.image_base64;return o.a.createElement(l.b,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:r?"50%":"",dangerouslySetInlineStyle:{__style:m&&f?{transform:"translateY(-75px)"}:{}}},o.a.createElement(l.b,{display:"flex",direction:"column",alignItems:"center"},a&&a.id&&o.a.createElement(u,{pin:a}),o.a.createElement(l.b,{paddingY:r?9:0,width:216},o.a.createElement(l.b,{ref:i,maxHeight:m&&f?220:335,shape:"rounded",overflow:"hidden"},E?o.a.createElement(l.p,{alt:s,src:E,naturalHeight:v.height||1,naturalWidth:v.width||1}):!!g&&o.a.createElement(p.a,{color:n||"",description:s,url:g})),o.a.createElement(l.b,{marginTop:2,paddingX:2,id:"PinPanePinMeta"},o.a.createElement("div",{ref:function(t){e.anchor=t}},o.a.createElement(_,{allowChange:!a.is_native,description:Object(S.a)(s),editing:f,hashtagFlyoutOpen:b,onHandleDescriptionBlur:this.handleDescriptionBlur,onHandleDescriptionEdit:this.handleDescriptionEdit,onRefTextArea:this.handleRefTextArea,onChange:this.onDescriptionChange,onCursorChange:this.onCursorChange}))))),this.anchor&&b?o.a.createElement(d.a,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,editing:f,query:h}):null)}}])&&O(n.prototype,a),i&&O(n,i),t}();t.a=Object(E.a)(B)},UApa:function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return v});var r=n("GyhR"),o=n.n(r),a=n("kAB2"),i=n("Qo1m"),c=n("Irlq"),l=n("+U6O");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=1800,b=function(e){return{opacity:e?1:0,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}},y=function(e,t,n,r){var o=[],a={};if(n.current&&r&&r.current){var i=t.current.getBoundingClientRect(),c=n.current.getBoundingClientRect(),l=r.current.getBoundingClientRect();a={left:c.left-i.left,top:c.top-i.top,width:c.width,height:c.height};var s={x:l.x-c.x,y:l.y-c.y},u={x:l.width/c.width,y:l.height/c.height};o.push("translate(".concat(s.x,"px, ").concat(s.y,"px)")),o.push("scale(".concat(u.x,", ").concat(u.y,")"))}return{position:"absolute",left:a.left,top:a.top,width:a.width,height:a.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?o.join(" "):"none",transform:e?o.join(" "):"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",overflow:"hidden",zIndex:2}},g=function(e){return{opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"}},v=function(e){function t(){var e,n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return o=this,n=!(a=(e=d(t)).call.apply(e,[this].concat(c)))||"object"!==s(a)&&"function"!=typeof a?f(o):a,m(f(f(n)),"state",{isInitialized:!1}),m(f(f(n)),"containerRef",Object(r.createRef)()),m(f(f(n)),"pinDestinationRef",Object(r.createRef)()),n}var n,v,_;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["PureComponent"]),n=t,(v=[{key:"componentDidMount",value:function(){var e=this;this.requestAnimationFrameId=window.requestAnimationFrame(function(){e.setState({isInitialized:!0})})}},{key:"componentWillUnmount",value:function(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.isInitialized,r=this.props.onDismiss;n&&r&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(r,h+800))}},{key:"render",value:function(){var e,t=this.props,n=t.firstRepin,s=t.pin,u=t.pinImageRef,d=t.selectedBoardName,p=s.description,f=void 0===p?"":p,m=s.images["236x"]||{},h=m.height,v=void 0===h?0:h,_=m.width,S=void 0===_?0:_,E=m.url,w=void 0===E?"":E,O=this.state.isInitialized;return o.a.createElement(r.Fragment,null,o.a.createElement(l.b,{position:"absolute",top:!0,bottom:!0,right:!0,left:!0,ref:this.containerRef},o.a.createElement(l.b,{maxHeight:335,overflow:"hidden",dangerouslySetInlineStyle:{__style:y(O,this.containerRef,u,this.pinDestinationRef)}},o.a.createElement(l.p,{alt:f,src:w||"",naturalHeight:v||1,naturalWidth:S||1})),o.a.createElement(l.b,{color:"white",position:"absolute",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:(e=O,{pointerEvents:"none",opacity:e?1:0,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1})}},o.a.createElement(l.b,{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",height:"100%",dangerouslySetInlineStyle:{__style:b(O)}},o.a.createElement(a.a,{delay:1250,startAnimation:O},o.a.createElement(l.u,{shape:"rounded",width:270,height:180},o.a.createElement(l.b,{display:"flex",height:"100%",width:"100%"},o.a.createElement(l.b,{ref:this.pinDestinationRef,color:"transparent",marginRight:1,flex:"grow",height:"100%"}),o.a.createElement(l.b,{display:"flex",width:80,direction:"column"},o.a.createElement(l.b,{color:"lightGray",flex:"grow",marginBottom:1}),o.a.createElement(l.b,{color:"lightGray",flex:"grow"}))))),o.a.createElement(l.b,{paddingX:2,dangerouslySetInlineStyle:{__style:g(O)}},o.a.createElement(l.m,{size:"sm"},n?Object(c.b)(i.a._("You saved your first Pin to {{ selectedBoardName }}!","First board create confirmation message"),{selectedBoardName:d}):Object(c.b)(i.a._("You saved this Pin to {{ selectedBoardName }}!","Board create confirmation message"),{selectedBoardName:d})))))))}}])&&u(n.prototype,v),_&&u(n,_),t}();m(v,"defaultProps",{firstRepin:!1})},g4pz:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("GyhR"),o=n.n(r),a="#EFEFEF",i="#333333";function c(e){var t=e.size,n=e.grayscale,r=void 0!==n&&n,c=r?i:"#8E8E8E",l=r?a:"#EFEFEF";return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 36 36",version:"1.1"},o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("circle",{fill:l,cx:"18",cy:"18",r:"18"}),o.a.createElement("g",{id:"Icons/link",transform:"translate(9.000000, 9.000000)",fill:c,fillRule:"nonzero"},o.a.createElement("path",{d:"M15.75075,5.43075 L12.711,8.46975 L11.916,7.67475 L12.42,7.17075 C12.8595,6.732 12.8595,6.0195 12.42,5.58 C11.9805,5.14125 11.268,5.14125 10.82925,5.58 L10.326,6.084 L9.53025,5.289 L12.56925,2.25 L15.75075,5.43075 Z M8.46975,12.71175 L5.43075,15.75075 L2.24925,12.57 L5.289,9.53025 L6.08325,10.32525 L5.58,10.82925 C5.14125,11.26875 5.14125,11.9805 5.58,12.42 C6.01875,12.8595 6.732,12.85875 7.17075,12.42 L7.674,11.916 L8.46975,12.71175 Z M10.97925,0.65925 L7.9395,3.69825 C7.06125,4.5765 7.06125,6.00075 7.9395,6.87975 L8.73525,7.67475 L7.674,8.73525 L6.879,7.9395 C6.00075,7.06125 4.5765,7.06125 3.69825,7.9395 L0.65925,10.9785 C-0.21975,11.8575 -0.21975,13.28175 0.65925,14.16 L3.84,17.3415 C4.71825,18.21975 6.1425,18.21975 7.02075,17.3415 L10.0605,14.3025 C10.93875,13.4235 10.93875,11.99925 10.0605,11.121 L9.2655,10.32525 L10.326,9.2655 L11.121,10.0605 C11.99925,10.93875 13.4235,10.93875 14.30175,10.0605 L17.34075,7.0215 C18.21975,6.14325 18.21975,4.719 17.34075,3.84 L14.16,0.65925 C13.28175,-0.21975 11.8575,-0.21975 10.97925,0.65925 Z",id:"path-1"}))))}},ms9C:function(e,t,n){"use strict";var r=n("H++a"),o=n("ePT2"),a=n("UhjI"),i=n("q579"),c=n("LxOv"),l={DIALOG_WIDTH:550,DIALOG_HEIGHT:420,openDialog:function(e){var t=e.ga_category||"share_twitter";a.a.trackEvent(t,"click");var n=l._getWindowUrl(e.tweet_path,e.tweet_text);c.a.open(n,l.DIALOG_WIDTH,l.DIALOG_HEIGHT)},_getWindowUrl:function(e,t){return i.a.appendQueryString("https://twitter.com/intent/tweet",{via:"pinterest",url:e?i.a.absolutify(e):void 0,text:t||void 0})}},s=l,u={ObjectTypeToInviteObject:{pin:1,board:2,pinner:3,article:5,did_it:6},_convertToInviteObject:function(e){return this.ObjectTypeToInviteObject[e]||0},_logShareInvite:function(e,t){var n=this._convertToInviteObject(e.object_type),r=e.invite_channel,a=null==e.invite_category?3:e.invite_category,i=e.object_id;return o.a.create("SentExternalInviteCallbackResource",{invite_type:{invite_category:a,invite_object:n,invite_channel:r},invite_code:t,object_id:i}).callCreate()},createAndLogShareInvite:function(e){return u.createShareInviteData(e).then(function(t){return u._logShareInvite(e,t.invite_code),Promise.resolve(t)},function(e){return Promise.reject(e)})},createShareInviteData:function(e){var t=this._convertToInviteObject(e.object_type),n=e.invite_channel,r=null==e.invite_category?3:e.invite_category,a=e.object_id;return o.a.create("CreateExternalInviteResource",{invite_type:{invite_category:r,invite_object:t,invite_channel:n},object_id:a}).callCreate().then(function(e){return Promise.resolve(e.resource_response.data)},function(e){return Promise.reject(e)})},logShareInvite:function(e,t){t&&u._logShareInvite(e,t.invite_code)},shareFacebookInvite:function(e){return u.createShareInviteData(e).then(function(t){var n=t.invite_url,o=t.invite_code;return n&&r.default.open({type:"share",object_type:e.object_type,object_id:e.object_id,name:e.name,caption:t.title,description:e.description,path:n,picture:e.picture,callback:function(t){t&&!t.error_message&&u._logShareInvite(e,o)}}),Promise.resolve(t)},function(e){return Promise.reject(e)})},shareTwitterInvite:function(e){var t=this._convertToInviteObject(e.object_type);return u.createShareInviteData(e).then(function(n){var r=n.invite_url,o=n.invite_code,a=e.description;return 6===t&&e.name&&(a=e.name),r&&s.openDialog({tweet_path:r,tweet_text:a}),u._logShareInvite(e,o),Promise.resolve(n)},function(e){return Promise.reject(e)})},shareFbMessengerInvite:function(e){return u.createShareInviteData(e).then(function(t){var n=t.invite_url,o=t.invite_code;return n&&r.default.open({type:"send",object_type:e.object_type,object_id:e.object_id,name:e.name,caption:t.title,description:e.description,path:n,picture:e.picture,callback:function(t){t&&t.success&&u._logShareInvite(e,o)}}),Promise.resolve(t)},function(e){return Promise.reject(e)})}};t.a=u},rHfS:function(e,t,n){},rWj7:function(e,t,n){},vBjq:function(e,t,n){"use strict";var r=n("GyhR"),o=n("Ivf5"),a=n("D+W/"),i=n("vI2X"),c=n("Qo1m"),l=n("HcVA"),s=n("Reqc"),u=n("KsVg"),d=n("9Y9K"),p=n("+U6O");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){v(e,t,n[t])})}return e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=b(t).call(this,e),n=!o||"object"!==f(o)&&"function"!=typeof o?g(r):o,v(g(g(n)),"onCreateSection",function(){var e=n.props,t=e.board,r=e.dispatch,o=e.completeCreateSectionAction,a=e.pinImport;return n.setState({isSaving:!0}),r(Object(i.a)({boardId:t.id,name:n.state.inputName.trim(),pinImport:a})).then(function(e){n.setState({isSaving:!1,newSection:e}),o(e)}).catch(function(e){n.setState({createError:e.message,isSaving:!1})})}),v(g(g(n)),"handleKeyDown",function(e){var t=n.state,r=t.createError,o=t.inputName;[a.a.KeyCode.ENTER,a.a.KeyCode.NUMPAD_ENTER].includes(e.which)&&!r&&o.trim()&&n.onCreateSection()}),v(g(g(n)),"handleChangeName",function(e){n.setState({createError:null,inputName:e})}),v(g(g(n)),"handleInputRef",function(e){n.setState({inputRef:e})}),n.state={createError:null,inputName:e.initialName||"",inputRef:null,newSection:null,isSaving:!1},n}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidUpdate",value:function(e,t){var n=this.state,r=n.createError,o=n.inputRef;!o||t.inputRef&&!r||o.focus()}},{key:"render",value:function(){var e=this.props,t=e.onClearModal,n=e.showTitle,o=e.positionRelative,a=this.state,i=a.createError,u=a.inputName,d=a.isSaving,f=!!u.trim()&&!i;return r.createElement(p.b,{xs:{display:"flexColumn"},color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:o?"relative":"absolute",shape:"rounded",width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},n&&r.createElement(p.b,{marginTop:3,paddingX:6,paddingY:3},r.createElement(p.K,{size:"xl",bold:!0},c.a._("Add section","Title in the add section modal"))),r.createElement(p.b,{padding:3},r.createElement(p.b,{marginBottom:2},r.createElement(p.q,{htmlFor:"sectionEditName"},r.createElement(p.K,{size:"sm",color:i?"red":"gray"},c.a._("Name","Board section name")))),r.createElement(p.b,null,r.createElement(l.a,{className:"boardCreateInput".concat(i?" error":""),id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:c.a._('Like "Lighting"',"Placeholder for board section name"),ref:this.handleInputRef,type:"text",value:u,style:m({border:"none",outline:"none",fontSize:15,marginBottom:5,padding:6,width:"95%",color:"#333"},i?{background:"#e6abad",border:"1px solid #e60023",borderRadius:3}:{})}))),r.createElement(p.j,null),r.createElement(p.b,{display:"flex",flex:"grow"}),r.createElement(p.j,null),r.createElement(p.b,{padding:6},i&&r.createElement(p.b,{marginBottom:3},r.createElement(p.K,{align:"center",bold:!0,color:"red",size:"sm"},i)),r.createElement(p.b,{display:"flex",justifyContent:"between"},r.createElement(p.c,{onClick:t,text:c.a._("Cancel","cancel section add"),inline:!0}),r.createElement(s.a,{disabled:!f||d,onClick:this.onCreateSection,submitting:d,text:c.a._("Add","add a new section")}))))}}])&&h(n.prototype,o),u&&h(n,u),t}();t.a=Object(d.compose)(Object(o.connect)(),u.a)(_)}}]);