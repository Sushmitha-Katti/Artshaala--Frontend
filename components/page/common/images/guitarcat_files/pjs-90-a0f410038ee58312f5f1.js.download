(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[90],{"/ml6":function(e,t,n){"use strict";var r=n("GyhR"),o=n("Ivf5"),a=n("SMmS"),i=n("7Iyi");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return r=this,o=(e=l(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==c(o)&&"function"!=typeof o?f(r):o,d(f(f(n)),"fetch",function(){var e=n.props,t=e.dispatch,r=e.name,o=e.options;t(Object(i.a)(r,o))}),d(f(f(n)),"fetchMore",function(){var e=n.props,t=e.dispatch,r=e.name,o=e.options;t(Object(i.d)(r,o))}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this.props,t=e.allowStale,n=void 0===t||t,r=e.data;n&&r||this.fetch()}},{key:"componentWillUnmount",value:function(){this.interval&&(clearInterval(this.interval),delete this.interval)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.data,r=e.isAtEnd,o=e.isFetching;return t?t({refresh:this.fetch,loadMore:this.fetchMore,data:n,isAtEnd:r,isFetching:o}):null}}])&&s(n.prototype,o),a&&s(n,a),t}();t.a=Object(o.connect)(function(e,t){var n=t.name,r=t.options,o=void 0===r?{}:r,i=e.resources,c=Object(a.a)(o,{}),s=!!(i.fetching[n]||{})[c];return i.data[n]&&i.data[n][c]?{isFetching:s,isAtEnd:"-end-"===i.data[n][c].nextBookmark,data:i.data[n][c].data}:{isFetching:s,isAtEnd:!1,data:null}})(p)},"09jw":function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=n("Qo1m"),i=n("iJ35"),c=n("ePT2"),s=n("VSY/"),l=n("+U6O");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=d(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==u(o)&&"function"!=typeof o?m(r):o,b(m(m(n)),"state",{boardInviteAccepted:!1,boardInvitePending:!0,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),b(m(m(n)),"handleInviteResponse",function(e){var t=n.props,r=t.boardInviteItem,o=t.onDeclineRequest,a=r.board,i=void 0===a?{}:a,s=r.invited_user,l=void 0===s?{}:s;n.setState({isAcceptButtonLoading:e,isIgnoreButtonLoading:!e});var u={board_id:i.id,invited_user_id:l.id},f=c.a.create("BoardInviteResource",u);(e?f.callUpdate():f.callDelete()).then(function(){n.setState({boardInviteAccepted:e,boardInvitePending:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),e||o()})}),n}var n,h,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(h=[{key:"getBoardRep",value:function(e,t){return o.a.createElement(i.b,{to:t,inline:!0},o.a.createElement(l.u,{width:40,height:40,shape:"rounded"},o.a.createElement(l.p,{alt:"",color:"",naturalWidth:40,naturalHeight:40,src:t||"",fit:"cover"})))}},{key:"getBoardInfo",value:function(e,t){return o.a.createElement(i.b,{to:t},o.a.createElement(l.K,{bold:!0},e))}},{key:"getInviteeInfo",value:function(e){var t=e.full_name;return Object(s.i)(a.a._("{{ fullName }} invited you to this board"),{fullName:t})}},{key:"getRequesterInfo",value:function(e){var t=e.username,n=e.full_name;return Object(s.i)(a.a._("{{ fullName }} wants to join your board"),{fullName:n,username:t})}},{key:"getJoinedText",value:function(e){var t=e.username,n=e.full_name;return Object(s.i)(a.a._("{{ fullName }} joined your board"),{fullName:n,username:t})}},{key:"render",value:function(){var e=this;if(!this.state.boardInvitePending&&!this.state.boardInviteAccepted)return null;var t=this.props,n=t.boardInviteItem,r=t.isInboxRedesign,c=n.board,s=n.invited_by_user,u=n.invited_user,f=c.image_cover_url,d=c.name,p=c.url,m=s.id===u.id,b=m?p+"invite/":p;return o.a.createElement("div",{className:"BoardInvite Module news"},o.a.createElement(l.b,{paddingX:r?4:2,display:"flex",direction:"row",paddingY:r?1:4},this.getBoardRep(d,f),o.a.createElement(l.b,{paddingX:3,flex:"grow"},o.a.createElement(l.b,{marginBottom:3},o.a.createElement(i.b,{to:b},o.a.createElement(l.K,{size:"sm",bold:!0},d)),this.state.boardInvitePending?o.a.createElement(l.K,{size:"sm"},m?this.getRequesterInfo(s):this.getInviteeInfo(s)):o.a.createElement(l.K,{size:"sm"},m?this.getJoinedText(s):a.a._("You joined this board","board invites"))),this.state.boardInvitePending&&o.a.createElement(l.b,{display:"flex",marginStart:-1,marginEnd:-1},o.a.createElement(l.b,{flex:"grow",paddingX:1},o.a.createElement(l.c,{disabled:this.state.isIgnoreButtonLoading,onClick:function(){return e.handleInviteResponse(!1)},text:a.a._("Decline","decline board collaborator invite or request"),size:"sm"})),o.a.createElement(l.b,{flex:"grow",paddingX:1},o.a.createElement(l.c,{color:"red",disabled:this.state.isAcceptButtonLoading,onClick:function(){return e.handleInviteResponse(!0)},text:a.a._("Accept","accept board invite"),size:"sm"}))))))}}])&&f(n.prototype,h),y&&f(n,y),t}(),y=n("Ivf5"),v=n("E56J"),g=n("spTd");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=_(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==w(o)&&"function"!=typeof o?S(r):o,j(S(S(n)),"state",{contactRequestCompleted:!1,isAccepted:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),j(S(S(n)),"handleInviteAcceptResponse",function(){n.setState({isAcceptButtonLoading:!0,isIgnoreButtonLoading:!1}),c.a.create("ContactRequestAcceptResource",{contact_request:n.props}).callUpdate().then(function(e){var t=n.props.dispatch;if(n.setState({isAccepted:!0,contactRequestCompleted:!0,isAcceptButtonLoading:!1}),e&&e.resource_response.data){var r=e.resource_response.data;t(Object(g.c)(r)),t(Object(g.h)(r.id)),t(Object(g.g)(r.id))}})}),j(S(S(n)),"handleInviteDeclineResponse",function(){var e=n.props.onDeclineRequest;n.setState({isAcceptButtonLoading:!1,isIgnoreButtonLoading:!0}),c.a.create("ContactRequestIgnoreResource",{contact_request:n.props}).callDelete().then(function(){n.setState({isAccepted:!1,contactRequestCompleted:!0,isIgnoreButtonLoading:!1}),e()})}),n}var n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,r["PureComponent"]),n=t,(i=[{key:"renderRequestText",value:function(e,t){if(e){var n=e.name,r=e.url;if(n&&r)return s.i(a.a._("{{ senderName }} invited you to this board"),{senderName:t})}return s.i(a.a._("{{ senderName }} wants to send a message to you"),{senderName:t})}},{key:"renderAcceptedBoard",value:function(){var e=this.props,t=e.board,n=e.isInboxRedesign;if(!t)return null;var r=t.name,i=t.url,c=t.image_thumbnail_url;return o.a.createElement(l.t,{href:i},o.a.createElement(l.b,{paddingX:n?4:2,paddingY:4,display:"flex"},o.a.createElement(l.u,{shape:"rounded",width:50,height:50},o.a.createElement(l.p,{alt:r,src:c,naturalHeight:60,naturalWidth:60})),o.a.createElement(l.b,{paddingX:3,flex:"grow",display:"flex",direction:"column",justifyContent:"center"},o.a.createElement(l.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},r),o.a.createElement(l.K,{color:"darkGray",size:"sm"},a.a._("You joined this board","Status message for a group board the user has joined.")))))}},{key:"render",value:function(){var e=this.props,t=e.board,n=e.sender,r=e.isInboxRedesign,i=this.state,c=i.contactRequestCompleted,s=i.isAccepted,u=i.isAcceptButtonLoading,f=i.isIgnoreButtonLoading;if(c)return t&&s?this.renderAcceptedBoard():null;var d=n.image_large_url,p=n.full_name,m=n.username;return o.a.createElement(l.b,{paddingX:r?4:2,paddingY:4,display:"flex",direction:"row"},o.a.createElement(l.b,{height:40,width:40,flex:"none"},o.a.createElement(l.t,{href:"/"+m+"/",onClick:function(){return v.default.increment("web.social.contact_request.profile_nav")}},o.a.createElement(l.a,{name:m,src:d}))),o.a.createElement(l.b,{paddingX:3,flex:"grow"},o.a.createElement(l.b,{marginBottom:3},t?o.a.createElement(l.t,{href:t.url},o.a.createElement(l.K,{bold:!0,size:"sm"},t.name)):o.a.createElement(l.t,{href:"".concat(m),onClick:function(){return v.default.increment("web.social.contact_request.profile_nav")}},o.a.createElement(l.K,{bold:!0,size:"sm"},p)),o.a.createElement(l.K,{size:"sm"},this.renderRequestText(t,p))),o.a.createElement(l.b,{display:"flex",marginLeft:-1,marginRight:-1},o.a.createElement(l.b,{paddingX:1,flex:"grow"},o.a.createElement(l.c,{disabled:f,onClick:this.handleInviteDeclineResponse,size:"sm",text:a.a._("Decline","ignore contact request")})),o.a.createElement(l.b,{paddingX:1,flex:"grow"},o.a.createElement(l.c,{color:"red",disabled:u,onClick:this.handleInviteAcceptResponse,size:"sm",text:a.a._("Accept","accept contact request")})))))}}])&&E(n.prototype,i),u&&E(n,u),t}(),k=Object(y.connect)()(C),I=n("Y2BC"),R=n("9Y9K"),x=n("Irlq");function P(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var N=function(e,t){return e.created_at&&t.created_at?new Date(e.created_at)>new Date(t.created_at)?-1:1:0};t.a=Object(R.compose)(Object(I.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1}),Object(I.b)({name:"BoardOwnerCollaboratorJoinRequestsResource",key:"boardJoinRequests",options:function(e){return{field_set_key:"news"}}},{allowStale:!1}),Object(I.b)({name:"BoardInvitesResource",key:"boardInvites",options:function(e){return{current_user:!0,field_set_key:"news"}}},{allowStale:!1}))(function(e){var t=e.boardJoinRequests,n=e.boardInvites,o=e.contactRequests,i=e.onClick,c=e.showAllRequests,s=e.handleCancelViewContactRequests,u=e.isInboxRedesign;if(!t.isLoaded&&!t.isLoaded&&!t.isLoaded)return null;var f=P(t.data||[]).concat(P(n.data||[]),P(o.data||[])),d=function(){o.refreshData()},p=function(){n.refreshData(),t.refreshData()};f.sort(N);var m=!c&&f.length>2,b=m?f.slice(0,2):f;return r.createElement(r.Fragment,null,c&&r.createElement(l.b,{paddingX:2,paddingY:2,display:"flex",direction:"row",alignItems:"center",justifyContent:"between"},r.createElement(l.b,{column:2},r.createElement(l.o,{icon:"arrow-back",accessibilityLabel:a.a._("Back to inbox","Icon to exit messages feed and go back to inbox"),onClick:s})),r.createElement(l.b,{column:8,overflow:"hidden"},r.createElement(l.K,{bold:!0,align:"center",truncate:!0},u?a.a._("All Invites","Heading for the invites and requests feed, which includes contact requests, board invites, and board join requests"):a.a._("Requests","Heading for the requests feed, which includes contact requests, board invites, and board join requests"))),r.createElement(l.b,{flex:"grow",column:2})),b.map(function(e){var t=e.type,n=e.id;return"contactrequest"===t?r.createElement(k,Object.assign({},e,{key:n,onDeclineRequest:d,isInboxRedesign:u})):"collaboratorinvite"===t?r.createElement(h,{boardInviteItem:e,key:n,onDeclineRequest:p,isInboxRedesign:u}):null}),m&&r.createElement(l.b,{width:"100%",paddingX:2,paddingY:2,marginTop:-1},r.createElement(l.c,{text:Object(x.b)(a.a._("See all {{ n }} invites"),{n:f.length}).join(""),size:"sm",color:"white",onClick:i})),!u&&r.createElement(l.j,null))})},"3nKd":function(e,t,n){"use strict";n.r(t);var r=n("GyhR"),o=n.n(r),a=n("Ivf5"),i=n("z1WJ"),c=n("09jw"),s=n("VSY/"),l=n("hXwk"),u=n("PNko"),f=n.n(u),d=n("Qo1m"),p=n("CST5"),m=n("iJ35"),b=(n("hvnN"),n("ePT2")),h=n("UHJ+"),y=n("NmcB"),v=n("spTd"),g=n("+U6O");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){var t=e.name,n=e.emails,r=e.users,a=e.viewerId,i=r.filter(function(e){return e.id!==a});return o.a.createElement(g.b,{paddingY:1},o.a.createElement(g.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},t||i.map(function(e){return e.first_name||e.full_name}).concat(n).join(", ")))}function k(e){var t=e.message,n=e.viewerId,r=t.board,a=t.created_at,i=t.pin,c=t.sender,l=t.text,u=t.user,f=l,p=c.id===n,m=p?d.a._("You","messaging in the inbox, when the viewer(You) sends a pin, board, or profile to another user without text"):c.first_name;return f?f&&p&&(f=d.a._("You","messaging in the inbox, when the viewer(You) sends a message to another user")+": "+f):i?f=s.i(d.a._("{{ senderName }} sent a Pin","messaging"),{senderName:m}):r?f=s.i(d.a._("{{ senderName }} sent a board","messaging"),{senderName:m}):u&&(f=s.i(d.a._("{{ senderName }} sent a user profile","messaging"),{senderName:m})),o.a.createElement(g.b,{display:"flex",direction:"row",flex:"grow",alignItems:"baseline"},o.a.createElement(g.b,{marginRight:2,flex:"shrink",dangerouslySetInlineStyle:{__style:{maxWidth:"80%"}}},o.a.createElement(g.K,{color:"darkGray",size:"sm",truncate:!0},f)),o.a.createElement(g.b,{flex:"none"},o.a.createElement(g.K,{color:"gray",size:"xs",truncate:!0},d.a.getHumanizedTimesince(a,{isAbbreviated:!0}))))}function I(e){var t=e.board,n=e.pin,r=e.user,a=null;if(n){var i=n.images["236x"]||n.images["136x136"];a=o.a.createElement(g.u,{shape:"rounded",wash:!0,height:60,width:40},o.a.createElement(g.p,{alt:"",src:i.url,naturalWidth:i.width,naturalHeight:i.height,color:n.dominant_color,fit:"cover"}))}else t?a=o.a.createElement(g.u,{shape:"rounded",width:40,height:40},o.a.createElement(g.p,{alt:"",src:t.image_thumbnail_url||"",naturalWidth:60,naturalHeight:60})):r&&(a=o.a.createElement(g.b,{shape:"rounded",width:40,height:40},o.a.createElement(g.a,{name:r.full_name,src:r.image_large_url})));return a?o.a.createElement(g.b,{display:"flex",alignItems:"center",width:30,marginLeft:5,marginRight:6},o.a.createElement(g.b,{display:"block"},a)):null}var R=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=_(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==w(o)&&"function"!=typeof o?S(r):o,j(S(S(n)),"state",{isAnimatingOut:!1,unread:n.props.data.unread||0}),j(S(S(n)),"handleHideConversation",function(e){e.stopPropagation();var t=n.props,r=t.data,o=t.dispatch,a=r.id;b.a.create("ConversationResource",{conversation_id:a}).callDelete({showError:!1}),n.setState({isAnimatingOut:!0}),setTimeout(function(){o(Object(v.d)(a))},500),n.removeConversationChatHead(a),n.logConversationItemHide(a)}),j(S(S(n)),"handleConversationItemClick",function(){var e=n.props.data;n.setState({unread:0}),e.board||n.showConversationChatHead(e),n.logConversationItemClick()}),j(S(S(n)),"logConversationItemClick",function(){Object(y.a)(101,{component:54,element:277})}),j(S(S(n)),"logConversationItemHide",function(e){Object(y.a)(182,{component:54,element:277,conversation_id:e})}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,r["Component"]),n=t,(a=[{key:"showConversationChatHead",value:function(e){var t=this.props.dispatch,n=e.id;t(Object(v.h)(n)),t(Object(v.g)(n)),t(h.a)}},{key:"removeConversationChatHead",value:function(e){var t=this.props.dispatch;t(Object(v.e)(e)),t(Object(v.b)(e))}},{key:"renderItemContent",value:function(){var e=this.state.isAnimatingOut,t=this.props,n=t.data,r=t.viewerId,a=n.board,i=n.emails,c=n.last_message,s=n.name,u=n.users,m=i||[];return o.a.createElement("div",{className:f()("ConversationListItemReact",{conversationHidden:e})},o.a.createElement(g.b,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{marginRight:10}}},o.a.createElement(l.a,{board:a,emails:m,users:u})),o.a.createElement(g.b,{display:"flex",width:"85%",height:"100%"},o.a.createElement(g.b,{flex:"grow",display:"flex",direction:"column",height:"100%",paddingY:2,maxWidth:"233"},o.a.createElement(C,{name:s,emails:i||[],users:u,viewerId:r}),o.a.createElement(g.b,{flex:"grow",display:"flex",direction:"column"},c?o.a.createElement(k,{message:c,viewerId:r}):null)),c?o.a.createElement(I,c):null),this.state.unread>0?o.a.createElement("span",{className:"conversationUnreadMark"}):null,o.a.createElement(p.a,{className:"conversationCloseButton",hasText:!0,onClick:this.handleHideConversation,text:d.a._("Ã—","close button"),type:"borderless"}))}},{key:"render",value:function(){var e=this.props.data,t=e.board,n=e.users;return n&&n.length?t?o.a.createElement(m.b,{onClick:this.handleConversationItemClick,to:t.url},this.renderItemContent()):o.a.createElement("div",{onClick:this.handleConversationItemClick,role:"button"},this.renderItemContent()):null}}])&&E(n.prototype,a),i&&E(n,i),t}();var x=Object(a.connect)(function(e){return{viewerId:e.viewer.id}})(R),P=n("E56J"),N=n("8rWZ"),A=n("Y2BC"),D=n("SMmS"),L=n("9Y9K");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=500,W="existingConversationsView",G="newMessageView",K="contactRequestsView",J=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=q(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==T(o)&&"function"!=typeof o?z(r):o,V(z(z(n)),"state",{currentView:W,hoverColor:"transparent"}),V(z(z(n)),"handleCancelSecondaryView",function(){n.setState({currentView:W})}),V(z(z(n)),"handleNewMessageButtonClick",function(){n.setState({currentView:G}),n.logNewMessageButtonClick()}),V(z(z(n)),"handleViewContactRequestsClick",function(){n.setState({currentView:K})}),V(z(z(n)),"handleScroll",function(){n.props.isFetching||(n._container&&n._container.scrollHeight-n._container.scrollTop-n._container.clientHeight)<H&&n.fetchMore()}),V(z(z(n)),"handleMouseHoverSVG",function(){n.setState({hoverColor:"rgba(0, 0, 0, 0.06)"})}),V(z(z(n)),"handleMouseLeaveSVG",function(){n.setState({hoverColor:"transparent"})}),V(z(z(n)),"logNewMessageButtonClick",function(){Object(y.a)(101,{component:54,element:275})}),V(z(z(n)),"handleDismiss",function(){var e=n.props.onDismiss;P.default.increment("web_messaging.close_from_conversation_panel"),e()}),V(z(z(n)),"handleBoardInvitesDidUpdate",function(){var e=n.props,t=e.boardInvites,r=e.boardJoinRequests;t.refreshData(),r.refreshData()}),V(z(z(n)),"handleContactRequestsDidUpdate",function(){n.props.contactRequests.refreshData()}),n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this.props.isFullAuth&&this._container.addEventListener("scroll",this.handleScroll),Object(y.a)(7161,{})}},{key:"componentWillUnmount",value:function(){this._container.removeEventListener("scroll",this.handleScroll)}},{key:"fetchMore",value:function(){var e=this.props,t=e.isAtEnd,n=e.isFetching,r=e.fetchMoreData,o=e.isFullAuth;!n&&o&&(t?this._container.removeEventListener("scroll",this.handleScroll):r())}},{key:"renderNewMessageView",value:function(){var e=this.props.conversations,t=void 0===e?[]:e;return o.a.createElement("div",{className:"newMessageContainer"},o.a.createElement(i.default,{conversationItems:t,handleCancelNewMessageClick:this.handleCancelSecondaryView,isWebMessagingRedesignExpEnabled:!1}))}},{key:"renderContactRequestsView",value:function(){return o.a.createElement(c.a,{showAllRequests:!0,handleCancelViewContactRequests:this.handleCancelSecondaryView,isInboxRedesign:!1})}},{key:"renderNewEmptyState",value:function(){return o.a.createElement(g.b,{marginTop:12,padding:12,alignItems:"start"},o.a.createElement(g.m,{size:"sm",color:"darkGray"},d.a._("Share ideas with your friends","introduction message when inbox is empty")),o.a.createElement(g.b,{marginTop:6},o.a.createElement(g.c,{text:d.a._("New message","compose button for inbox empty state"),onClick:this.handleNewMessageButtonClick,size:"md",color:"red",accessibilityLabel:d.a._("composeNewMessage","accessibility label for compose button when inbox is empty"),inline:!0})))}},{key:"renderExistingConversationsView",value:function(){var e=this.props,t=e.conversations,n=void 0===t?[]:t,r=e.isAtEnd;return o.a.createElement("div",{className:"existingConversationsContainer"},o.a.createElement(g.b,{position:"relative"},o.a.createElement(g.b,{position:"absolute",right:!0,dangerouslySetInlineStyle:{__style:{padding:10}}},o.a.createElement(g.o,{onClick:this.handleNewMessageButtonClick,icon:"compose",iconColor:"gray",size:"sm",accessibilityLabel:d.a._("composeNewMessage","accessibility label for compose icon button")})),o.a.createElement(g.b,{paddingY:4,dangerouslySetInlineStyle:{__style:{paddingRight:"25%",paddingLeft:"25%"}}},o.a.createElement(g.K,{bold:!0,size:"md",align:"center"},d.a._("Messages","header text for conversations dropdown")))),o.a.createElement(c.a,{onClick:this.handleViewContactRequestsClick,isInboxRedesign:!1}),o.a.createElement(g.b,{position:"relative"},o.a.createElement(g.b,{position:"absolute",width:"100%",top:!0,marginBottom:12},o.a.createElement("ul",{className:"conversationItems"},0===n.length&&r?this.shouldShowEmptyState&&this.renderNewEmptyState():n.map(function(e,t){return o.a.createElement("li",{className:"conversationItemWrapper",key:e.id},o.a.createElement(x,{data:e}),t<n.length-1?o.a.createElement(g.j,null):null)})))))}},{key:"renderMessageView",value:function(){switch(this.state.currentView){case W:return this.renderExistingConversationsView();case G:return this.renderNewMessageView();case K:return this.renderContactRequestsView()}}},{key:"render",value:function(){var e=this;return o.a.createElement(N.a,{view:42,viewParameter:203},o.a.createElement("div",{className:"conversationPanel",ref:function(t){e._container=t}},this.renderMessageView()))}},{key:"shouldShowEmptyState",get:function(){var e=this.props,t=e.boardInvites,n=e.boardJoinRequests,r=e.contactRequests;return 0===(t&&t.data||[]).length+(n&&n.data||[]).length+(r&&r.data||[]).length}}])&&M(n.prototype,a),s&&M(n,s),t}();function Y(e){return e.sort(function(e,t){return new Date((t.last_message||t).created_at)-new Date((e.last_message||e).created_at)}),e}var U=Object(L.compose)(Object(a.connect)(function(e){var t,n=e.conversations,r=e.viewer;return{conversations:Y((t=n.data,Object.keys(t).map(function(e){return t[e]})).filter(function(e){return e.users.length>1&&e.last_message})),isFullAuth:r.isAuth&&!r.isLimitedLogin}}),Object(D.b)({name:"ConversationsResource",key:"conversationsResource"},{allowStale:!1}),Object(A.b)({name:"BoardOwnerCollaboratorJoinRequestsResource",key:"boardJoinRequests",options:{field_set_key:"news"}},{allowStale:!1}),Object(A.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1}),Object(A.b)({name:"BoardInvitesResource",key:"boardInvites",options:{current_user:!0,field_set_key:"news"}},{allowStale:!1}))(J),F=n("2YES");function X(e){var t=e.onDismiss;return o.a.createElement("div",{className:"NewsConversationsDropdown"},o.a.createElement("div",{className:"content"},o.a.createElement(g.b,{maxHeight:500},o.a.createElement(F.a,null,function(e){return o.a.createElement(U,{requestContext:e,onDismiss:t})}))))}n.d(t,"default",function(){return X})},AdUJ:function(e,t,n){"use strict";var r=n("GyhR");t.a=r.createContext(0)},CST5:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n("GyhR"),o=n("XQD6"),a=n("PNko"),i=n.n(a),c=n("ogC+");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=this,a=(e=u(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==s(a)&&"function"!=typeof a?d(r):a,p(d(d(n)),"handleClick",function(e){e&&e.preventDefault(),n.props.loading||(n.props.src?Object(o.a)(n.props.src):n.props.onClick&&n.props.onClick(e),n.props.stopPropagation&&e.stopPropagation())}),n}var n,a,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.accessibilityLabel,n=e.children,o=e.disabled,a=e.hasIcon,s=e.htmlType,l=e.id,u=e.itemProp,f=e.large,d=e.loading,p=e.onMouseDown,m=e.onMouseEnter,b=e.onMouseLeave,h=e.rel,y=e.rounded,v=e.showText,g=e.style,w=e.text,E=e.type,_=i()(this.props.className,{Button:"plain"!==E,Module:"plain"!==E,btn:"borderless"!==E&&"plain"!==E,hasIcon:a,hasText:v,rounded:!0===y,leftRounded:"left"===y,rightRounded:"right"===y,borderless:"borderless"===E,primary:"primary"===E,disabled:o,large:f});return r.createElement("button",{"aria-label":t||null,className:_,disabled:o,id:l,itemProp:u,onClick:this.handleClick,onMouseDown:p,onMouseEnter:m,onMouseLeave:b,rel:h,style:g,type:s},d?r.createElement(c.a,{size:"small"}):null,n,a?r.createElement("em",null):null,r.createElement("span",{className:v?"buttonText":"accessibilityText"},w))}}])&&l(n.prototype,a),m&&l(n,m),t}();p(m,"defaultProps",{disabled:!1,htmlType:"button",large:!1,rounded:!0,showText:!0,type:"default"})},JD0j:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n("GyhR"),o=n.n(r),a=n("Qo1m"),i=n("/ml6"),c=n("LCmp"),s=n("+U6O");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,d(t).apply(this,arguments))}var n,l,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(l=[{key:"render",value:function(){var e=this,t=this.props,n=t.conversationId,r=t.onSelect,l=t.onDismiss,u=t.height;return o.a.createElement(s.b,{height:u||600,width:"100%",display:"flex",direction:"column"},o.a.createElement(s.b,{display:"flex",direction:"row",alignItems:"center",paddingY:6,paddingX:6},o.a.createElement(s.b,{flex:"grow"},o.a.createElement(s.K,{size:"xl",bold:!0},a.a._("Send a Pin back","header text for sending a Pin to a conversation thread"))),o.a.createElement(s.o,{accessibilityLabel:a.a._("Close","Icon to close the related pins send a pin back"),icon:"cancel",onClick:l})),o.a.createElement(s.b,{paddingX:4,flex:"grow",overflow:"scroll"},o.a.createElement(i.a,{name:"ConversationRelatedPinsResource",options:{conversationId:n},allowStale:!1},function(t){var n=function(t){var n=t.data,a=t.isFetching,i=t.loadMore;return o.a.createElement("div",{ref:function(t){t&&(e._gridContainer=t)}},o.a.createElement(s.v,{items:n||[],comp:function(e){var t=e.data,n=t.id,a=t.grid_description,i=t.dominant_color,l=t&&t.images?t.images["474x"]||t.images["736x"]||t.images.orig:{};return o.a.createElement(s.b,{marginBottom:1},o.a.createElement(s.P,{onTouch:function(){return r(n)},mouseCursor:"pointer",shape:"rounded"},o.a.createElement(s.d,{image:o.a.createElement(s.u,{shape:"rounded",wash:!0},o.a.createElement(s.p,{alt:a,color:i,src:l.url,naturalHeight:l.height,naturalWidth:l.width}))},o.a.createElement(s.b,{padding:1},o.a.createElement(s.K,{size:"sm",bold:!0},Object(c.a)(a))))))},columnWidth:236,flexible:!0,minCols:2,gutterWidth:16,loadItems:i,scrollContainer:function(){return e._gridContainer}}),o.a.createElement(s.G,{show:a,accessibilityLabel:""}))};return t.data&&0===t.data.length?o.a.createElement(i.a,{name:"CategoryFeedResource",options:{feed:"everything"},allowStale:!1},n):n(t)})))}}])&&u(n.prototype,l),m&&u(n,m),t}()},SMmS:function(e,t,n){"use strict";n.d(t,"a",function(){return y}),n.d(t,"c",function(){return E});var r=n("GyhR"),o=n("Ivf5"),a=n("jlBG"),i=n("E56J"),c=(n("hvnN"),n("7Iyi"));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){return Object(a.a)("function"==typeof e?e(t):e||{})}var v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var o,a;return a=o=function(o){function a(){var n,r,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];return o=this,i=(n=p(a)).call.apply(n,[this].concat(u)),r=!i||"object"!==s(i)&&"function"!=typeof i?b(o):i,h(b(b(r)),"loadData",function(n){var r=t;e.forEach(function(e){var t=e.options,o=e.name,a="function"==typeof t?t(n):t;n.dispatch(Object(c.a)(o,a,void 0,void 0,r.traceLoggerHandlerName))})}),h(b(b(r)),"loadMoreData",function(n){var r=t;e.forEach(function(e){var t=e.options,o=e.name,a="function"==typeof t?t(n):t;n.dispatch(Object(c.d)(o,a,void 0,void 0,r.traceLoggerHandlerName))})}),h(b(b(r)),"resourcesHash",JSON.stringify(e.map(function(e){return f({},e,{options:y(e.options,r.props)})}))),r}var i,v,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,r["Component"]),i=a,(v=[{key:"componentDidMount",value:function(){!1!==t.allowStale&&this.props.resourceLoaded||this.loadData(this.props)}},{key:"shouldComponentUpdate",value:function(e){var t,n,r=u(Object.keys(this.props)).concat(u(Object.keys(e))),o=!0,a=!1,i=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var l=c.value;if("resourceData"===l){if(t=this.props.resourceData,n=e.resourceData,JSON.stringify(t)!==JSON.stringify(n))return!0}else if(this.props[l]!==e[l])return!0}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return!1}},{key:"UNSAFE_componentWillUpdate",value:function(t){!this.props.resourceLoaded&&t.resourceLoaded&&this.props.onResourceLoaded&&this.props.onResourceLoaded(),!this.props.error&&t.error&&this.props.onResourceError&&this.props.onResourceError(t.error);var n=JSON.stringify(e.map(function(e){return f({},e,{options:y(e.options,t)})}));this.resourcesHash!==n&&(this.loadData(t),this.resourcesHash=n)}},{key:"render",value:function(){var e=this,t=this.props,o=t.error,a=t.isAtEnd,i=t.isFetching,c=t.resourceData,s=t.resourceLoaded,u=l(t,["error","isAtEnd","isFetching","resourceData","resourceLoaded"]);return delete u.onResourceError,delete u.onResourceLoaded,r.createElement(n,Object.assign({},c,u,{error:o,fetchMoreData:function(){return e.loadMoreData(e.props)},isAtEnd:a,isFetching:i,refreshData:function(){return e.loadData(e.props)},resourceLoaded:s}))}}])&&d(i.prototype,v),g&&d(i,g),a}(),h(o,"WrappedComponent",n),h(o,"displayName",1===e.length?e[0].name:"".concat(e.length," resources")),a}},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,a={name:e.name,options:e.options||{},key:e.key||"data"};return Object(o.connect)((r={},function(e){return function(t,n){var o,a=t.resources,c=a.fetching,s=a.data,l=e.some(function(e){var t=e.name,r=e.options;return c[t]&&c[t][y(r,n)]}),u={},f=[];e.forEach(function(e){var t=e.name,a=e.options,c=e.key;if(s[t]){var l=y(a,n);if(r[t]||(l in s[t]?i.default.increment("webapp.withResource.cache-hit",.05,{resource:t,cache_size:Object.keys(s[t]).length,level:"success",v:1}):Object.keys(s[t]).length?i.default.increment("webapp.withResource.populated-cache-miss",.05,{resource:t,cache_size:Object.keys(s[t]).length,level:"error",v:1,xFoundKeys:JSON.stringify(Object.keys(s[t])),xExpectedKey:l}):i.default.increment("webapp.withResource.empty-cache-miss",.05,{resource:t,cache_size:Object.keys(s[t]).length,level:"warn",v:1,xFoundKeys:null,xExpectedKey:l})),r[t]=!0,s[t][l]){var d=s[t][l],p=d.data,m=d.nextBookmark,b=d.error;u[c]=p,f.push(m),b&&(o=b)}}else i.default.increment("webapp.withResource.no-cache",.05,{resource:t,cache_size:0,level:"error",v:1})});var d=e.every(function(e){var t=e.key;return void 0!==u[t]});return{resourceLoaded:d,isAtEnd:d&&!l&&f.every(function(e){return"-end-"===e}),isFetching:l,nextBookmark:f[0],resourceData:u,error:o}}})([a]))(v([a],t)(n))}};t.b=g;var w=function(e){var t=e.name,n=e.options;return function(e,r){var o=e.resources.data;if(o[t]){var a=y(n,r);if(o[t][a])return{data:o[t][a].data}}return{data:null}}};function E(e){var t=e.name,n=e.options;return Object(o.connect)(w({name:t,options:n||{}}))}},Y7oc:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("GyhR"),o=n.n(r),a=n("Ivf5");function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e){return(0,e.children)(i(e,["children"]))}function s(e){var t=e.mapStateToProps,n=e.children,r=Object(a.connect)(t)(c);return o.a.createElement(r,null,n)}},"a+Ts":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("GyhR"),o=n.n(r),a=n("Qo1m"),i=n("+U6O");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=l(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==c(o)&&"function"!=typeof o?f(r):o,d(f(f(n)),"state",{hover:!1}),d(f(f(n)),"handleMouseEnter",function(){n.setState({hover:!0})}),d(f(f(n)),"handleMouseLeave",function(){n.setState({hover:!1})}),n}var n,p,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(p=[{key:"render",value:function(){var e=this.props,t=e.isBelowMessageLimit,n=e.onClick,r=e.isWebMessagingRedesignExpEnabled,c=this.state.hover;return o.a.createElement(i.b,{marginLeft:1,marginRight:2},o.a.createElement(i.P,{onTouch:t?n:function(){},shape:"rounded",onMouseEnter:r?this.handleMouseEnter:function(){},onMouseLeave:r?this.handleMouseLeave:function(){}},o.a.createElement(i.b,{padding:r?2:1,color:c?"lightGray":"transparent",shape:"rounded"},o.a.createElement(i.K,{size:"sm",color:t?"red":"gray",bold:!0},a.a._("Send","button label")))))}}])&&s(n.prototype,p),m&&s(n,m),t}()},hXwk:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=n("Ivf5"),i=n("PNko"),c=n.n(i),s=(n("hvnN"),n("+U6O"));function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m,b,h,y=[["fullWrapper"],["leftWrapper halfWrapper","rightWrapper halfWrapper isWholeHalf"],["leftWrapper halfWrapper","rightWrapper halfWrapper smallImage top","rightWrapper halfWrapper smallImage bottom"]],v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,d(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(a=[{key:"getUsersToShow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.props.viewerId;return void 0!==n&&(t=t.filter(function(e){return e.id!==n})),t.concat(e.map(function(e){return{id:"",full_name:e,first_name:e,username:e}})).slice(0,3)}},{key:"render",value:function(){var e=this.props,t=e.board,n=e.emails,r=e.shouldLink,a=e.size,i=e.users,l=this.getUsersToShow(n,i),u=l.length<=3?y[l.length-1]:[];return t?function(e,t){var n=e.name,r=e.image_thumbnail_url;return o.a.createElement("div",{className:c()("Image","Module","boardMessageRep",t)},o.a.createElement("img",{alt:n,src:r}))}(t,a):l.length>0?function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2?arguments[2]:void 0;arguments.length>3&&arguments[3];return o.a.createElement(s.b,{display:"flex",alignItems:"center"},o.a.createElement(s.l,{collaborators:t.map(function(e,t){return{name:e.full_name||e.email||e.username||"user ".concat(t),src:e.is_default_image?void 0:e.image_large_url||e.image_medium_url}}),size:{small:"sm",medium:"md",normal:"lg"}[e]}))}(a,u,l,r):null}}])&&u(n.prototype,a),i&&u(n,i),t}();h={shouldLink:!1,size:"medium"},(b="defaultProps")in(m=v)?Object.defineProperty(m,b,{value:h,enumerable:!0,configurable:!0,writable:!0}):m[b]=h,t.a=Object(a.connect)(function(e){var t=e.viewer;return{viewerId:t.isAuth?t.id:null}})(v)},"ogC+":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("GyhR"),o=n.n(r);n("hvnN");function a(e){var t=e.mask,n=e.loading,r=e.size;return o.a.createElement("div",null,t&&o.a.createElement("div",{className:"moduleMask",style:{bottom:0,left:0,right:0,top:0}}),n&&o.a.createElement("div",{className:"Spinner"},o.a.createElement("div",{className:"small"===r?"spinnerSmall":"spinnerMedium"})))}a.defaultProps={loading:!0,mask:!0,size:"medium"}},spTd:function(e,t,n){"use strict";n.d(t,"h",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"g",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"f",function(){return u}),n.d(t,"a",function(){return f}),n.d(t,"k",function(){return d}),n.d(t,"j",function(){return p}),n.d(t,"i",function(){return h});var r=n("ePT2");function o(e){return{type:"CONVERSATION_SHOW",payload:{id:e}}}function a(e){return{type:"CONVERSATION_HIDE",payload:{id:e}}}function i(e){return{type:"CONVERSATION_OPEN",payload:{id:e}}}function c(e){return{type:"CONVERSATION_CLOSE",payload:{id:e}}}function s(e){return{type:"CONVERSATION_CREATE",payload:e}}function l(e){return{type:"CONVERSATION_DELETE",payload:{id:e}}}function u(e,t){return{type:"CONVERSATION_MESSAGES_UPDATE",payload:{conversationId:e,messages:t}}}function f(){return function(e){r.a.create("ConversationBadgeResource",{}).callDelete({showError:!1}),e({type:"CONVERSATION_BADGE_RESET"})}}function d(e,t){return{type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}}function p(e,t,n){return{type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t,newMessageId:n}}}var m,b=(m=0,function(){return m++});function h(e,t,n){var o,a=new Promise(function(i){(o=function(o,a){var c=t.text,l=t.pinId,u=t.boardId,f=t.userId,m=t.didItId,h=a();function y(){var t=r.a.create("ConversationMessagesResource",{conversation_id:e,text:c,pin:l,board:u,user:f,user_did_it_data:m,source:n}),a="".concat(b());t.callCreate().then(function(t){o(p(e,a,t.resource_response.data.id))}),o(d(e,{text:c,sender:h.viewer,created_at:(new Date).toString(),created_ms:Date.now(),id:a,board:null,event_type:null,pin:l?h.pins[l]:null,type:"message",user_did_it_data:null,user:null})),i()}h.conversations.data[e]?y():r.a.create("ConversationResource",{conversation_id:e}).callGet().then(function(e){var t=e&&e.resource_response&&e.resource_response.data;o(s(t)),y()})}).getPromise=function(){return a}});return o}}}]);