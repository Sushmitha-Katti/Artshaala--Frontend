(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["ExperienceSurveyCommon"],{L5aL:function(e,t,n){"use strict";n.r(t);var r=n("GyhR"),o=n.n(r),i=n("Qo1m"),a=n("+U6O");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=5e3,m="surveyLoaded",p="surveyFinished",v=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return r=this,o=(e=s(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==l(o)&&"function"!=typeof o?d(r):o,y(d(d(n)),"state",{surveyAccepted:!1,surveyLoaded:!1,surveyLoadFailed:!1}),y(d(d(n)),"processIFrameMessage",function(e){var t=n.props,r=t.presentationDelay,o=void 0===r?f:r,i=t.onComplete,a=t.onView,l=t.surveyLink,u=e.origin||e.originalEvent.origin;l.startsWith(u)&&(e.data===p?i():e.data===m&&(window.clearTimeout(n.loadSurveyFailureTimeout),n.loadSurveyTimeout=window.setTimeout(function(){a(),n.setState({surveyLoaded:!0})},o)))}),y(d(d(n)),"handleShowSurvey",function(){n.setState({surveyAccepted:!0})}),n}var n,v,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(v=[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("message",this.processIFrameMessage),this.loadSurveyFailureTimeout=window.setTimeout(function(){e.state.surveyLoaded||(window.clearTimeout(e.loadSurveyTimeout),e.setState({surveyLoadFailed:!0}))},15e3)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.processIFrameMessage),window.clearTimeout(this.loadSurveyTimeout),window.clearTimeout(this.loadSurveyFailureTimeout)}},{key:"render",value:function(){var e=this.state,t=e.surveyAccepted,n=e.surveyLoadFailed,r=e.surveyLoaded;if(n)return null;var l=this.props,u=l.acceptButtonText,s=l.bodyText,c=l.declineButtonText,d=l.onDismiss,y=l.subtitleText,f=l.surveyLink,m=l.titleText,p=o.a.createElement("iframe",{className:t?"PinnerSurvey":"SurveyHidden",src:f,title:i.a._("Pinterest Survey","Accessible label for survey frame")});return r?o.a.createElement("div",{style:{zIndex:1e3,position:"absolute"}},o.a.createElement(a.y,{accessibilityCloseLabel:i.a._("close","Accessible label for the modal close button"),accessibilityModalLabel:i.a._("Have a few minutes to take a survey?","User evaluation survey"),footer:!t&&o.a.createElement(a.b,{display:"flex",justifyContent:"end",deprecatedPadding:{x:1}},o.a.createElement("div",{className:"p1"},o.a.createElement(a.c,{text:c,onClick:d})),o.a.createElement("div",{className:"p1"},o.a.createElement(a.c,{color:"red",text:u,onClick:this.handleShowSurvey}))),heading:t?"":m,onDismiss:d,role:"alertdialog",size:t?"lg":"md"},o.a.createElement("div",null,p),!t&&o.a.createElement(a.b,{deprecatedPadding:3},o.a.createElement(a.K,{smSize:"xs",mdSize:"sm",lgSize:"md"},y),o.a.createElement(a.K,{smSize:"xs",mdSize:"sm",lgSize:"md"},s)))):p}}])&&u(n.prototype,v),b&&u(n,b),t}(),b=n("iz36"),h=n("dsfX"),w=n("iJ35");function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=this,o=(e=_(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==S(o)&&"function"!=typeof o?x(r):o,T(x(x(n)),"state",{surveyLoaded:!1}),T(x(x(n)),"loadSurvey",function(){n.setState({surveyLoaded:!0}),n.props.view()}),T(x(x(n)),"handleDismiss",function(){n.props.dismiss(),n.setState({surveyLoaded:!1})}),T(x(x(n)),"handleComplete",function(){n.props.complete(),n.setState({surveyLoaded:!1})}),n}var n,l,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(l=[{key:"componentDidMount",value:function(){var e=this.props.displayData.delay;this.surveyTimer=window.setTimeout(this.loadSurvey,e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.surveyTimer)}},{key:"render",value:function(){var e=this;if(!this.state.surveyLoaded)return null;var t=this.props.displayData,n=t.buttons,r=t.detailed_text,l=t.title_text;return o.a.createElement(h.a,{accessibilityCloseLabel:i.a._("close","Accessible label for the modal close button"),heading:l,accessibilityModalLabel:i.a._("Would you mind taking a survey?","User eval survey"),onDismiss:this.handleDismiss,size:"sm",footer:o.a.createElement(a.b,{display:"flex",justifyContent:"end"},n.map(function(t,n){return t.uri?o.a.createElement(a.b,{key:t.text,marginStart:1},o.a.createElement(w.b,{external:!0,to:t.uri},o.a.createElement(a.c,{color:"red",text:t.text,onClick:e.handleComplete}))):o.a.createElement(a.b,{key:t.text,marginStart:1},o.a.createElement(a.c,{text:t.text,onClick:e.handleDismiss}))}))},o.a.createElement(a.b,{padding:3},o.a.createElement(a.K,{size:"lg",smSize:"sm",mdSize:"md",lgSize:"lg"},r)))}}])&&E(n.prototype,l),u&&E(n,u),t}();function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(e){var t=e.placementId;return r.createElement(b.a,{placementId:t,type:5,disableAutoView:!0},function(e){var t=e.complete,n=e.dismiss,o=e.display_data,i=e.view,a=o.anket,l=o.buttons,u=o.delay,s=o.detailed_text,c=o.subtitle_text,d=o.title_text,y=O(l,2),f=y[0],m=y[1];return a?r.createElement(v,{acceptButtonText:m.text,bodyText:s,declineButtonText:f.text,onComplete:t,onDismiss:n,onView:i,presentationDelay:u,subtitleText:c,surveyLink:m.uri,titleText:d}):r.createElement(L,{complete:t,dismiss:n,displayData:o,view:i})})}n.d(t,"default",function(){return k})}}]);